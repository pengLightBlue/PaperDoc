# è®¾è®¡æ¨¡å¼

## ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼

-   è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€ç¨‹åºçš„é‡ç”¨æ€§ã€‚

## ä¸ºä»€ä¹ˆè¦å­¦ä¹ è®¾è®¡æ¨¡å¼

-   çœ‹æ‡‚æºä»£ç ï¼šå¦‚æœä½ ä¸æ‡‚è®¾è®¡æ¨¡å¼å»çœ‹Jdkã€Springã€SpringMVCã€IOç­‰ç­‰ç­‰ç­‰çš„æºç ï¼Œä½ ä¼šå¾ˆè¿·èŒ«ï¼Œä½ ä¼šå¯¸æ­¥éš¾è¡Œ
-   çœ‹çœ‹å‰è¾ˆçš„ä»£ç ï¼šä½ å»ä¸ªå…¬å¸éš¾é“éƒ½æ˜¯æ–°é¡¹ç›®è®©ä½ æ¥æ‰‹ï¼Ÿå¾ˆæœ‰å¯èƒ½æ˜¯æ¥ç›˜çš„ï¼Œå‰è¾ˆçš„å¼€å‘éš¾é“ä¸ç”¨è®¾è®¡æ¨¡å¼ï¼Ÿ
-   ç¼–å†™è‡ªå·±çš„ç†æƒ³ä¸­çš„å¥½ä»£ç ï¼šæˆ‘ä¸ªäººåæ­£æ˜¯è¿™æ ·çš„ï¼Œå¯¹äºæˆ‘è‡ªå·±å¼€å‘çš„é¡¹ç›®æˆ‘ä¼šå¾ˆè®¤çœŸï¼Œæˆ‘å¯¹ä»–æ¯”å¯¹æˆ‘å¥³æœ‹å‹è¿˜å¥½ï¼ŒæŠŠé¡¹ç›®å½“æˆè‡ªå·±çš„å„¿å­ä¸€æ ·

## è®¾è®¡æ¨¡å¼åˆ†ç±»

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/17172acfe20b2d2d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp)

-   åˆ›å»ºå‹æ¨¡å¼ï¼Œå…±äº”ç§ï¼š**å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼**ã€**å•ä¾‹æ¨¡å¼**ã€å»ºé€ è€…æ¨¡å¼ã€**åŸå‹æ¨¡å¼ã€‚**

-   ç»“æ„å‹æ¨¡å¼ï¼Œå…±ä¸ƒç§ï¼šé€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚

-   è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…±åä¸€ç§ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€‚

## è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/17172acff10be430~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp)

### å¼€æ”¾å°é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰

-   åŸåˆ™æ€æƒ³ï¼šå°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“æ¥è§£å†³éœ€æ±‚å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®Œæˆå˜åŒ–
-   æè¿°ï¼šä¸€ä¸ªè½¯ä»¶äº§å“åœ¨ç”Ÿå‘½å‘¨æœŸå†…ï¼Œéƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ—¢ç„¶å˜åŒ–æ˜¯ä¸€ä¸ªæ—¢å®šçš„äº‹å®ï¼Œæˆ‘ä»¬å°±åº”è¯¥åœ¨è®¾è®¡çš„æ—¶å€™å°½é‡é€‚åº”è¿™äº›å˜åŒ–ï¼Œä»¥æé«˜é¡¹ç›®çš„ç¨³å®šæ€§å’Œçµæ´»æ€§ã€‚
-   ä¼˜ç‚¹ï¼šå•ä¸€åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œæ¯ä¸ªç±»éƒ½æœ‰è‡ªå·±è´Ÿè´£çš„èŒè´£ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ä¸èƒ½ç ´åç»§æ‰¿å…³ç³»çš„ä½“ç³»ã€‚

### é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰

-   åŸåˆ™æ€æƒ³ï¼šä½¿ç”¨çš„åŸºç±»å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ç»§æ‰¿çš„å­ç±»ï¼Œå®Œç¾çš„æ›¿æ¢åŸºç±»ã€‚
-   å¤§æ¦‚æ„æ€æ˜¯ï¼šå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚å­ç±»å¯ä»¥å®ç°çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œä½†ä¸èƒ½è¦†ç›–çˆ¶ç±»çš„éæŠ½è±¡æ–¹æ³•ï¼Œå­ç±»ä¸­å¯ä»¥å¢åŠ è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•ã€‚
-   ä¼˜ç‚¹ï¼šå¢åŠ ç¨‹åºçš„å¥å£®æ€§ï¼Œå³ä½¿å¢åŠ äº†å­ç±»ï¼ŒåŸæœ‰çš„å­ç±»è¿˜å¯ä»¥ç»§ç»­è¿è¡Œï¼Œäº’ä¸å½±å“ã€‚

### ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰

-   ä¾èµ–å€’ç½®åŸåˆ™çš„æ ¸å¿ƒæ€æƒ³æ˜¯é¢å‘æ¥å£ç¼–ç¨‹.

-   ä¾èµ–å€’è½¬åŸåˆ™è¦æ±‚æˆ‘ä»¬åœ¨ç¨‹åºä»£ç ä¸­ä¼ é€’å‚æ•°æ—¶æˆ–åœ¨å…³è”å…³ç³»ä¸­ï¼Œå°½é‡å¼•ç”¨å±‚æ¬¡é«˜çš„æŠ½è±¡å±‚ç±»ï¼Œ

-   è¿™ä¸ªæ˜¯å¼€æ”¾å°é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹æ˜¯ï¼šå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚

### æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰

-   è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚è¿˜æ˜¯ä¸€ä¸ªé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦çš„æ„æ€ï¼Œä»è¿™å„¿æˆ‘ä»¬çœ‹å‡ºï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä¸€ä¸ªè½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ï¼Œä¸ºäº†å‡çº§å’Œç»´æŠ¤æ–¹ä¾¿ã€‚æ‰€ä»¥ä¸Šæ–‡ä¸­å¤šæ¬¡å‡ºç°ï¼šé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚
-   ä¾‹å¦‚ï¼šæ”¯ä»˜ç±»çš„æ¥å£å’Œè®¢å•ç±»çš„æ¥å£ï¼Œéœ€è¦æŠŠè¿™ä¿©ä¸ªç±»åˆ«çš„æ¥å£å˜æˆä¿©ä¸ªéš”ç¦»çš„æ¥å£

### è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆæœ€å°‘çŸ¥é“åŸåˆ™ï¼‰ï¼ˆDemeter Principleï¼‰

-   åŸåˆ™æ€æƒ³ï¼šä¸€ä¸ªå¯¹è±¡åº”å½“å¯¹å…¶ä»–å¯¹è±¡æœ‰å°½å¯èƒ½å°‘åœ°äº†è§£ï¼Œç®€ç§°ç±»é—´è§£è€¦
-   å¤§æ¦‚æ„æ€å°±æ˜¯ä¸€ä¸ªç±»å°½é‡å‡å°‘è‡ªå·±å¯¹å…¶ä»–å¯¹è±¡çš„ä¾èµ–ï¼ŒåŸåˆ™æ˜¯ä½è€¦åˆï¼Œé«˜å†…èšï¼Œåªæœ‰ä½¿å„ä¸ªæ¨¡å—ä¹‹é—´çš„è€¦åˆå°½é‡çš„ä½ï¼Œæ‰èƒ½æé«˜ä»£ç çš„å¤ç”¨ç‡ã€‚
-   ä¼˜ç‚¹ï¼šä½è€¦åˆï¼Œé«˜å†…èšã€‚

### å•ä¸€èŒè´£åŸåˆ™ï¼ˆPrinciple of single responsibilityï¼‰

-   åŸåˆ™æ€æƒ³ï¼šä¸€ä¸ªæ–¹æ³•åªè´Ÿè´£ä¸€ä»¶äº‹æƒ…ã€‚
-   æè¿°ï¼šå•ä¸€èŒè´£åŸåˆ™å¾ˆç®€å•ï¼Œä¸€ä¸ªæ–¹æ³• ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªèŒè´£ï¼Œå„ä¸ªèŒè´£çš„ç¨‹åºæ”¹åŠ¨ï¼Œä¸å½±å“å…¶å®ƒç¨‹åºã€‚ è¿™æ˜¯å¸¸è¯†ï¼Œå‡ ä¹æ‰€æœ‰ç¨‹åºå‘˜éƒ½ä¼šéµå¾ªè¿™ä¸ªåŸåˆ™ã€‚
-   ä¼˜ç‚¹ï¼šé™ä½ç±»å’Œç±»çš„è€¦åˆï¼Œæé«˜å¯è¯»æ€§ï¼Œå¢åŠ å¯ç»´æŠ¤æ€§å’Œå¯æ‹“å±•æ€§ï¼Œé™ä½å¯å˜æ€§çš„é£é™©ã€‚

## è®¾è®¡æ¨¡å¼çš„åˆ†ç±»

**åˆ›å»ºå‹ï¼š** åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘ï¼Œä¸ä½¿ç”¨ new ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œç¨‹åºåœ¨åˆ¤æ–­éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´çµæ´»ã€‚åŒ…æ‹¬å·¥å‚/æŠ½è±¡å·¥å‚/å•ä¾‹/å»ºé€ è€…/åŸå‹æ¨¡å¼ã€‚

**ç»“æ„å‹ï¼š** é€šè¿‡ç±»å’Œæ¥å£é—´çš„ç»§æ‰¿å’Œå¼•ç”¨å®ç°åˆ›å»ºå¤æ‚ç»“æ„çš„å¯¹è±¡ã€‚åŒ…æ‹¬é€‚é…å™¨/æ¡¥æ¥æ¨¡å¼/è¿‡æ»¤å™¨/ç»„åˆ/è£…é¥°å™¨/å¤–è§‚/äº«å…ƒ/ä»£ç†æ¨¡å¼ã€‚

**è¡Œä¸ºå‹ï¼š** é€šè¿‡ç±»ä¹‹é—´ä¸åŒé€šä¿¡æ–¹å¼å®ç°ä¸åŒè¡Œä¸ºã€‚åŒ…æ‹¬è´£ä»»é“¾/å‘½å/è§£é‡Šå™¨/è¿­ä»£å™¨/ä¸­ä»‹è€…/å¤‡å¿˜å½•/è§‚å¯Ÿè€…/çŠ¶æ€/ç­–ç•¥/æ¨¡æ¿/è®¿é—®è€…æ¨¡å¼ã€‚

## å·¥å‚æ¨¡å¼

### æ ¸å¿ƒæ¦‚å¿µ

#### **ç®€å•å·¥å‚ï¼ˆSimple Factoryï¼‰**

- **å®šä¹‰**ï¼šé€šè¿‡ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œæ ¹æ®è¾“å…¥å‚æ•°å†³å®šåˆ›å»ºä¸åŒçš„å…·ä½“å¯¹è±¡ã€‚
- **æ ¸å¿ƒ**ï¼šé›†ä¸­åŒ–å¯¹è±¡çš„åˆ›å»ºé€»è¾‘ï¼Œéšè—å®ä¾‹åŒ–ç»†èŠ‚ã€‚
- **Go å®ç°**ï¼šè¿”å›æ¥å£ç±»å‹ï¼Œä¾èµ–å‚æ•°åˆ¤æ–­å…·ä½“ç±»å‹ã€‚

#### **å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰**

- **å®šä¹‰**ï¼šå®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œç”±å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚
- **æ ¸å¿ƒ**ï¼šå°†å¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°å­ç±»ï¼Œå®ç°æ‰©å±•æ€§ã€‚
- **Go å®ç°**ï¼šé€šè¿‡æ¥å£å®šä¹‰å·¥å‚æ–¹æ³•ï¼Œæ¯ä¸ªå…·ä½“ç±»å‹å¯¹åº”ä¸€ä¸ªå·¥å‚ã€‚

####  **æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰**

- **å®šä¹‰**ï¼šæä¾›ä¸€ä¸ªæ¥å£ï¼Œç”¨äºåˆ›å»º**ç›¸å…³æˆ–ä¾èµ–å¯¹è±¡å®¶æ—**ï¼Œè€Œæ— éœ€æŒ‡å®šå…·ä½“ç±»ã€‚
- **æ ¸å¿ƒ**ï¼šå¤„ç†ä¸€ç»„ç›¸äº’å…³è”çš„å¯¹è±¡çš„åˆ›å»ºã€‚
- **Go å®ç°**ï¼šé€šè¿‡ç»„åˆå¤šä¸ªå·¥å‚æ–¹æ³•ï¼Œç”Ÿæˆé…å¥—çš„å¯¹è±¡é›†åˆã€‚

------

### é€‚ç”¨åœºæ™¯

| æ¨¡å¼         | é€‚ç”¨åœºæ™¯                                                     |
| :----------- | :----------------------------------------------------------- |
| **ç®€å•å·¥å‚** | å¯¹è±¡åˆ›å»ºé€»è¾‘ç®€å•ï¼Œç±»å‹è¾ƒå°‘ï¼Œä¸”è°ƒç”¨æ–¹ä¸éœ€è¦å…³å¿ƒå…·ä½“å®ç°ã€‚     |
| **å·¥å‚æ–¹æ³•** | éœ€è¦çµæ´»æ‰©å±•æ–°ç±»å‹ï¼Œä¸”å¸Œæœ›å°†å¯¹è±¡åˆ›å»ºé€»è¾‘åˆ†æ•£åˆ°å­ç±»ä¸­ã€‚       |
| **æŠ½è±¡å·¥å‚** | éœ€è¦åˆ›å»ºä¸€ç»„ç›¸äº’å…³è”æˆ–ä¾èµ–çš„å¯¹è±¡ï¼ˆå¦‚ä¸åŒä¸»é¢˜çš„ UI ç»„ä»¶ã€æ•°æ®åº“å…¨å®¶æ¡¶ï¼‰ã€‚ |

------

### ä¼˜ç¼ºç‚¹å¯¹æ¯”

| æ¨¡å¼         | ä¼˜ç‚¹                               | ç¼ºç‚¹                                     |
| :----------- | :--------------------------------- | :--------------------------------------- |
| **ç®€å•å·¥å‚** | ä»£ç ç®€å•ï¼Œé›†ä¸­ç®¡ç†å¯¹è±¡åˆ›å»ºé€»è¾‘ã€‚   | è¿åå¼€é—­åŸåˆ™ï¼ˆæ–°å¢ç±»å‹éœ€ä¿®æ”¹å·¥å‚å‡½æ•°ï¼‰ã€‚ |
| **å·¥å‚æ–¹æ³•** | ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œæ‰©å±•æ€§å¼ºã€‚           | ç±»/æ¥å£æ•°é‡å¢åŠ ï¼Œä»£ç å¤æ‚åº¦æå‡ã€‚        |
| **æŠ½è±¡å·¥å‚** | ä¿è¯å¯¹è±¡æ—çš„å…¼å®¹æ€§ï¼Œé¿å…ä¸ä¸€è‡´æ€§ã€‚ | æ‰©å±•æ–°å¯¹è±¡æ—å›°éš¾ï¼ˆéœ€ä¿®æ”¹æŠ½è±¡å·¥å‚æ¥å£ï¼‰ã€‚ |

------

### ä»£ç ç¤ºä¾‹

#### **ç®€å•å·¥å‚æ¨¡å¼**

```go
package main

import "fmt"

// æ¥å£
type Vehicle interface {
    Drive() string
}

// å…·ä½“å®ç°
type Car struct{}
func (c Car) Drive() string { return "Driving a car" }

type Bike struct{}
func (b Bike) Drive() string { return "Riding a bike" }

// å·¥å‚å‡½æ•°
func NewVehicle(vehicleType string) Vehicle {
    switch vehicleType {
    case "car":
        return Car{}
    case "bike":
        return Bike{}
    default:
        panic("Unknown vehicle type")
    }
}

func main() {
    car := NewVehicle("car")
    fmt.Println(car.Drive()) // Driving a car
}
```

------

#### **å·¥å‚æ–¹æ³•æ¨¡å¼**

```go
package main

import "fmt"

// äº§å“æ¥å£
type Logger interface {
    Log(message string)
}

// å…·ä½“äº§å“
type FileLogger struct{}
func (f FileLogger) Log(message string) { 
    fmt.Println("Log to file:", message) 
}

type ConsoleLogger struct{}
func (c ConsoleLogger) Log(message string) { 
    fmt.Println("Log to console:", message) 
}

// å·¥å‚æ¥å£
type LoggerFactory interface {
    CreateLogger() Logger
}

// å…·ä½“å·¥å‚
type FileLoggerFactory struct{}
func (f FileLoggerFactory) CreateLogger() Logger { 
    return FileLogger{} 
}

type ConsoleLoggerFactory struct{}
func (c ConsoleLoggerFactory) CreateLogger() Logger { 
    return ConsoleLogger{} 
}

func main() {
    var factory LoggerFactory = FileLoggerFactory{}
    logger := factory.CreateLogger()
    logger.Log("Error occurred") // Log to file: Error occurred
}
```

------

#### **æŠ½è±¡å·¥å‚æ¨¡å¼**

```go
package main

import "fmt"

// ---- æ•°æ®åº“ç›¸å…³æ¥å£ ----
type Database interface {
    Connect() string
}

type MySQL struct{}
func (m MySQL) Connect() string { return "MySQL connected" }

type PostgreSQL struct{}
func (p PostgreSQL) Connect() string { return "PostgreSQL connected" }

// ---- æ—¥å¿—ç›¸å…³æ¥å£ ----
type Logger interface {
    Log(message string)
}

type FileLogger struct{}
func (f FileLogger) Log(message string) { 
    fmt.Println("File log:", message) 
}

type ConsoleLogger struct{}
func (c ConsoleLogger) Log(message string) { 
    fmt.Println("Console log:", message) 
}

// ---- æŠ½è±¡å·¥å‚æ¥å£ ----
type Factory interface {
    CreateDatabase() Database
    CreateLogger() Logger
}

// å…·ä½“å·¥å‚ï¼šMySQL + FileLogger ç»„åˆ
type MySQLFactory struct{}
func (m MySQLFactory) CreateDatabase() Database { return MySQL{} }
func (m MySQLFactory) CreateLogger() Logger    { return FileLogger{} }

// å…·ä½“å·¥å‚ï¼šPostgreSQL + ConsoleLogger ç»„åˆ
type PostgreSQLFactory struct{}
func (p PostgreSQLFactory) CreateDatabase() Database { return PostgreSQL{} }
func (p PostgreSQLFactory) CreateLogger() Logger    { return ConsoleLogger{} }

func main() {
    var factory Factory = PostgreSQLFactory{}
    db := factory.CreateDatabase()
    logger := factory.CreateLogger()
    fmt.Println(db.Connect())  // PostgreSQL connected
    logger.Log("DB connected") // Console log: DB connected
}
```

------

## æ€»ç»“

#### **æ ¸å¿ƒé€‰æ‹©åŸåˆ™**

- **ç®€å•å·¥å‚**ï¼šé€‚åˆå¯¹è±¡ç±»å‹å°‘ã€æ— éœ€é¢‘ç¹æ‰©å±•çš„åœºæ™¯ã€‚
- **å·¥å‚æ–¹æ³•**ï¼šé€‚åˆéœ€è¦çµæ´»æ‰©å±•æ–°ç±»å‹çš„åœºæ™¯ã€‚
- **æŠ½è±¡å·¥å‚**ï¼šé€‚åˆéœ€è¦ä¿è¯ä¸€ç»„å¯¹è±¡å…¼å®¹æ€§çš„åœºæ™¯ï¼ˆå¦‚è·¨å¹³å°ç»„ä»¶ï¼‰ã€‚

#### **Go çš„ç‹¬ç‰¹å®ç°**

- åˆ©ç”¨æ¥å£çš„éšå¼å®ç°ï¼Œæ— éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿å…³ç³»ã€‚
- é€šè¿‡è¿”å›æ¥å£ç±»å‹éšè—å…·ä½“å®ç°ï¼ˆå¦‚ `func New() Interface`ï¼‰ã€‚
- ä½¿ç”¨åŒ…çº§åˆ«çš„å¯è§æ€§æ§åˆ¶ï¼ˆå¦‚å°å†™ç»“æ„ä½“åï¼‰ï¼Œå¼ºåˆ¶ä½¿ç”¨å·¥å‚å‡½æ•°ã€‚

é€šè¿‡åˆç†é€‰æ‹©å·¥å‚æ¨¡å¼ï¼Œå¯ä»¥æ˜¾è‘—æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ï¼Œå°¤å…¶åœ¨å¤æ‚å¯¹è±¡åˆ›å»ºå’Œä¾èµ–ç®¡ç†çš„åœºæ™¯ä¸­æ•ˆæœæ˜¾è‘—ã€‚

## å•ä¾‹æ¨¡å¼

å•ä¾‹æ¨¡å¼çš„ä½œç”¨æ˜¯ç¡®ä¿æ— è®ºå¯¹è±¡è¢«å®ä¾‹åŒ–å¤šå°‘æ¬¡ï¼Œå…¨å±€éƒ½åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚æ ¹æ®è¿™ä¸€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åº”ç”¨åˆ°å…¨å±€å”¯ä¸€æ€§é…ç½®ã€æ•°æ®åº“è¿æ¥å¯¹è±¡ã€æ–‡ä»¶è®¿é—®å¯¹è±¡ç­‰ã€‚Go è¯­è¨€å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ã€‚

### é¥¿æ±‰å¼

é¥¿æ±‰å¼å®ç°å•ä¾‹æ¨¡å¼éå¸¸ç®€å•ï¼Œç›´æ¥çœ‹ä»£ç ï¼š

```
package singleton
type singleton struct{}
var instance = &singleton{}
func GetSingleton() *singleton {
    return instance
}
```

singleton åŒ…åœ¨è¢«å¯¼å…¥æ—¶ä¼šè‡ªåŠ¨åˆå§‹åŒ– instance å®ä¾‹ï¼Œä½¿ç”¨æ—¶é€šè¿‡è°ƒç”¨ singleton.GetSingleton() å‡½æ•°å³å¯è·å¾— singleton è¿™ä¸ªç»“æ„ä½“çš„å•ä¾‹å¯¹è±¡ã€‚

è¿™ç§æ–¹å¼çš„å•ä¾‹å¯¹è±¡æ˜¯åœ¨åŒ…åŠ è½½æ—¶ç«‹å³è¢«åˆ›å»ºï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹å¼å«ä½œé¥¿æ±‰å¼ã€‚ä¸ä¹‹å¯¹åº”çš„å¦ä¸€ç§å®ç°æ–¹å¼å«ä½œæ‡’æ±‰å¼ï¼Œæ‡’æ±‰å¼æ¨¡å¼ä¸‹å®ä¾‹ä¼šåœ¨ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶è¢«åˆ›å»ºã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡é¥¿æ±‰å¼å®ç°å•ä¾‹æ¨¡å¼çš„æ–¹å¼ç®€å•ï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹å¹¶ä¸æ¨èã€‚å› ä¸ºå¦‚æœå•ä¾‹å®ä¾‹åŒ–æ—¶åˆå§‹åŒ–å†…å®¹è¿‡å¤šï¼Œä¼šé€ æˆç¨‹åºåŠ è½½ç”¨æ—¶è¾ƒé•¿ã€‚

### æ‡’æ±‰å¼

æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ä¸‹å¦‚ä½•é€šè¿‡æ‡’æ±‰å¼å®ç°å•ä¾‹æ¨¡å¼ï¼š

```
package singleton
type singleton struct{}
var instance *singleton
func GetSingleton() *singleton {
    if instance == nil {
        instance = &singleton{}
    }
    return instance
}
```

ç›¸è¾ƒäºé¥¿æ±‰å¼çš„å®ç°ï¼Œæ‡’æ±‰å¼å°†å®ä¾‹åŒ– singleton ç»“æ„ä½“éƒ¨åˆ†çš„ä»£ç ç§»åˆ°äº† GetSingleton() å‡½æ•°å†…éƒ¨ã€‚è¿™æ ·èƒ½å¤Ÿå°†å¯¹è±¡å®ä¾‹åŒ–çš„æ­¥éª¤å»¶è¿Ÿåˆ° GetSingleton() ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ã€‚

ä¸è¿‡é€šè¿‡ instance == nil çš„åˆ¤æ–­æ¥å®ç°å•ä¾‹å¹¶ä¸ååˆ†å¯é ï¼Œå¦‚æœæœ‰å¤šä¸ª goroutine åŒæ—¶è°ƒç”¨ GetSingleton() å°±æ— æ³•ä¿è¯å¹¶å‘å®‰å…¨ã€‚

### æ”¯æŒå¹¶å‘çš„å•ä¾‹

å¦‚æœä½ ä½¿ç”¨ Go è¯­è¨€å†™è¿‡å¹¶å‘ç¼–ç¨‹ï¼Œåº”è¯¥å¾ˆå¿«èƒ½æƒ³åˆ°è¯¥å¦‚ä½•è§£å†³æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼å¹¶å‘å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼š

```
package singleton
import "sync"
type singleton struct{}
var instance *singleton
var mu sync.Mutex
func GetSingleton() *singleton {
    mu.Lock()
    defer mu.Unlock()
    if instance == nil {
        instance = &singleton{}
    }
    return instance
}
```

ä¸Šé¢ä»£ç çš„ä¿®æ”¹æ˜¯é€šè¿‡åŠ é”æœºåˆ¶ï¼Œå³åœ¨ GetSingleton() å‡½æ•°æœ€å¼€å§‹åŠ äº†å¦‚ä¸‹ä¸¤è¡Œä»£ç ï¼š

```
mu.Lock()
defer mu.Unlock()
```

åŠ é”çš„æœºåˆ¶å¯ä»¥æœ‰æ•ˆä¿è¯è¿™ä¸ªå®ç°å•ä¾‹æ¨¡å¼çš„å‡½æ•°æ˜¯å¹¶å‘å®‰å…¨çš„ã€‚

ä¸è¿‡ä½¿ç”¨äº†é”æœºåˆ¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼Œè¿™è®©æ¯æ¬¡è°ƒç”¨ GetSingleton() æ—¶ç¨‹åºéƒ½ä¼šè¿›è¡ŒåŠ é”ã€è§£é”çš„æ­¥éª¤ï¼Œä»è€Œå¯¼è‡´ç¨‹åºæ€§èƒ½çš„ä¸‹é™ã€‚

### åŒé‡é”å®š

åŠ é”ä¼šå¯¼è‡´ç¨‹åºæ€§èƒ½ä¸‹é™ï¼Œä½†åˆä¸ç”¨é”åˆæ— æ³•ä¿è¯ç¨‹åºçš„å¹¶å‘å®‰å…¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æœ‰äººæå‡ºäº†åŒé‡é”å®šï¼ˆDouble-Check Lockingï¼‰çš„æ–¹æ¡ˆï¼š

```
package singleton
import "sync"
type singleton struct{}
var instance *singleton
var mu sync.Mutex
func GetSingleton() *singleton {
    if instance == nil {
        mu.Lock()
        defer mu.Unlock()
        if instance == nil {
            instance = &singleton{}
        }
    }
    return instance
}
```

é€šè¿‡ä¸Šé¢çš„å¯ä»¥çœ‹åˆ°ï¼Œæ‰€è°“åŒé‡é”å®šå®é™…ä¸Šå°±æ˜¯åœ¨ç¨‹åºåŠ é”å‰åˆåŠ äº†ä¸€å±‚ instance == nil åˆ¤æ–­ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥å…¼é¡¾æ€§èƒ½å’Œå®‰å…¨ä¸¤ä¸ªæ–¹é¢ã€‚ä¸è¿‡è¿™è®©ä»£ç çœ‹èµ·æ¥æœ‰äº›å¥‡æ€ªï¼Œå¤–å±‚å·²ç»åˆ¤æ–­äº† instance == nilï¼Œä½†æ˜¯åŠ é”ååˆè¿›è¡Œäº†ç¬¬äºŒæ¬¡ instance == nil  åˆ¤æ–­ã€‚

å…¶å®å¤–å±‚çš„ instance == nil åˆ¤æ–­æ˜¯ä¸ºäº†æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œå…å»åŸæ¥æ¯æ¬¡è°ƒç”¨ GetSingleton() éƒ½ä¸Šé”çš„æ“ä½œï¼Œå°†åŠ é”çš„ç²’åº¦æ›´åŠ ç²¾ç»†åŒ–ã€‚ç®€å•è¯´å°±æ˜¯å¦‚æœ instance å·²ç»å­˜åœ¨ï¼Œåˆ™æ— éœ€è¿›å…¥ if é€»è¾‘ï¼Œç¨‹åºç›´æ¥è¿”å› instance å³å¯ã€‚è€Œå†…å±‚çš„ instance == nil  åˆ¤æ–­åˆ™è€ƒè™‘äº†å¹¶å‘å®‰å…¨ï¼Œè€ƒè™‘åˆ°ä¸‡ä¸€åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¤šä¸ª goroutine åŒæ—¶èµ°åˆ°äº†åŠ é”è¿™ä¸€æ­¥ï¼Œå†…å±‚åˆ¤æ–­ä¼šåœ¨è¿™é‡Œèµ·åˆ°ä½œç”¨ã€‚

### Gopher æƒ¯ç”¨æ–¹æ¡ˆ

è™½ç„¶åŒé‡é”å®šæœºåˆ¶å…¼é¡¾å’Œæ€§èƒ½å’Œå¹¶å‘å®‰å…¨ï¼Œä½†æ˜¾ç„¶ä»£ç æœ‰äº›ä¸‘é™‹ï¼Œä¸ç¬¦åˆå¹¿å¤§ Gopher çš„æœŸå¾…ã€‚å¥½åœ¨ Go è¯­è¨€åœ¨ sync åŒ…ä¸­æä¾›äº† Once æœºåˆ¶èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ï¼š

```
package singleton
import "sync"
type singleton struct{}
var instance *singleton
var once sync.Once
func GetSingleton() *singleton {
    once.Do(func() {
        instance = &singleton{}
    })
    return instance
}
```

Once æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œåœ¨æ‰§è¡Œ Do æ–¹æ³•çš„å†…éƒ¨é€šè¿‡ atomic æ“ä½œå’ŒåŠ é”æœºåˆ¶æ¥ä¿è¯å¹¶å‘å®‰å…¨ï¼Œä¸” once.Do èƒ½å¤Ÿä¿è¯å¤šä¸ª goroutine åŒæ—¶æ‰§è¡Œæ—¶ &singleton{} åªè¢«åˆ›å»ºä¸€æ¬¡ã€‚

å…¶å® Once å¹¶ä¸ç¥ç§˜ï¼Œå…¶å†…éƒ¨å®ç°è·Ÿä¸Šé¢ä½¿ç”¨çš„åŒé‡é”å®šæœºåˆ¶éå¸¸ç±»ä¼¼ï¼Œåªä¸è¿‡æŠŠ instance == nil æ¢æˆäº† atomic æ“ä½œï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ä¸‹å…¶å¯¹åº”æºç ã€‚

### æ€»ç»“

ä»¥ä¸Šå°±æ˜¯ Go è¯­è¨€ä¸­å®ç°å•ä¾‹æ¨¡å¼çš„å‡ ç§å¸¸ç”¨å¥—è·¯ï¼Œç»è¿‡å¯¹æ¯”å¯ä»¥å¾—å‡ºç»“è®ºï¼Œæœ€æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ once.Do æ¥å®ç°ï¼Œsync.Once åŒ…å¸®æˆ‘ä»¬éšè—äº†éƒ¨åˆ†ç»†èŠ‚ï¼Œå´å¯ä»¥è®©ä»£ç å¯è¯»æ€§å¾—åˆ°å¾ˆå¤§æå‡ã€‚

## ä»£ç†æ¨¡å¼

**ä»£ç†æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜åŸå§‹ç±»ï¼ˆæˆ–å«è¢«ä»£ç†ç±»ï¼‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¼•å…¥ä»£ç†ç±»æ¥ç»™åŸå§‹ç±»é™„åŠ åŠŸèƒ½ã€‚** ä¸€èˆ¬ä»£ç†ç±»å’Œè¢«ä»£ç†ç±»æœ‰åŒä¸€ä¸ªçˆ¶ç±»ã€‚

### 1.å®šä¹‰

#### 1.1ä»£ç†æ¨¡å¼

ä»£ç†æ¨¡å¼ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚

UMLç±»å›¾ï¼š

![å›¾ç‰‡](../images/design_pattern/1ba03f92d591413e8c1710a23b1aa85d.webp)

#### 1.2åˆ†æ

çœ‹UMLç±»å›¾ï¼Œå¯ä»¥çœ‹å‡ºä»£ç†ç±»Proxyå’Œè¢«ä»£ç†ç±»RealSubjectå®ç°äº†ç›¸åŒæ¥å£Subjectï¼Œä»£ç†ç±»åŒ…å«è¢«ä»£ç†ç±»çš„å¼•ç”¨ã€‚ä»£ç†æ¨¡å¼å®ç°äº†åœ¨è¢«ä»£ç†ç±»å¤–é¢å¥—äº†ä¸€å±‚å£³ã€‚è™½ç„¶æ•´ä½“çš„è®¾è®¡å’Œæ€æƒ³éƒ½å¾ˆç®€å•ï¼Œä½†æ•ˆæœå´å¾ˆæ˜æ˜¾ã€‚é¦–å…ˆåœ¨è¯·æ±‚RealSubjectçš„æ—¶å€™ï¼Œå¿…é¡»ç»è¿‡Proxyï¼Œè¿™æ ·ä¸€äº›å‰ç½®æˆ–è€…åç½®é€šç”¨æ“ä½œéƒ½å¯ä»¥æ”¾åœ¨Proxyä¸­ï¼Œæ‰©å±•æ€§å’Œé€šç”¨æ€§éƒ½ä¼šåŠ å¼ºã€‚å…¶æ¬¡ï¼Œå› ä¸ºProxyå’ŒRealSubjectå„è‡ªå®ç°äº†ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œä¼šä½¿RealSubjectæ›´åŠ å…³æ³¨è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œèµ·åˆ°å¾ˆå¥½çš„éš”ç¦»æ•ˆæœã€‚

### 2\. ä½¿ç”¨åœºæ™¯

ä½¿ç”¨ä»£ç†æ¨¡å¼çš„åœºæ™¯æœ‰ä»¥ä¸‹è¿™äº›ï¼š

1. ä¸šåŠ¡ç³»ç»Ÿçš„éåŠŸèƒ½æ€§éœ€æ±‚å¼€å‘ï¼šå¦‚ç›‘æ§ã€ç»Ÿè®¡ã€é‰´æƒã€é™æµã€äº‹åŠ¡ã€å¹‚ç­‰ã€æ—¥å¿—ç­‰ï¼Œè¿™äº›å’Œä¸šåŠ¡æ²¡æœ‰å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥æ”¾åˆ°Proxyä¸­ï¼ŒRealSubjectåªå…³æ³¨åŠŸèƒ½æ€§éœ€æ±‚ã€‚

   å…¬å¸å¯¹æ¥äº†å¤§é‡çš„ç¬¬ä¸‰æ–¹æ”¯ä»˜å…¬å¸ï¼ˆPayUã€PayTMã€WXï¼‰ï¼Œè¿™äº›å…¬å¸å‘èµ·æ”¯ä»˜çš„æµç¨‹æ˜¯ä¸€æ ·çš„ï¼Œæ ¸å¿ƒæ˜¯è·å–tokenï¼Œä½†æ˜¯è¿˜è¦åšå¾ˆå¤šçç¢ã€é€šç”¨çš„å·¥ä½œï¼Œå¦‚æ ¡éªŒç­¾åã€åˆå§‹åŒ–è®¢å•æ•°æ®ã€å‚æ•°æ£€æŸ¥ã€è®°å½•æ—¥å¿—ç­‰ã€‚è¿™äº›çç¢åŠŸèƒ½å¦‚æœè®©æ¯ä¸€ä¸ªæ”¯ä»˜ç±»è‡ªå·±å¤„ç†ï¼Œä¸ä½†æ˜¯é‡å¤å¼€å‘ï¼Œè€Œä¸”åæœŸä¿®æ”¹æ—¶ä¸æ˜“ç»´æŠ¤ï¼Œè¿™æ—¶å€™å°±å¾ˆé€‚åˆç”¨ä»£ç†æ¨¡å¼ã€‚

![å›¾ç‰‡](../images/design_pattern/bfe1a387610148c896f5f54dd3bb623b.webp)

2.  æ¡†æ¶è®¾è®¡ï¼Œå¦‚RPCçš„å®ç°ã€‚è°ƒç”¨RPCå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨è°ƒç”¨RPCæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ˜¯ä¸€ä¸ªä»£ç†ï¼Œåšäº†å¤§é‡æ“ä½œè®©å¼€å‘è€…å¯ä»¥ä¸å…³å¿ƒæ˜¯å¦‚ä½•æˆåŠŸè°ƒç”¨åˆ°æœåŠ¡ç«¯çš„ï¼Œåªéœ€è¦å…³å¿ƒé€»è¾‘å®ç°å³å¯ã€‚

### 3.ä»£ç å®ç°

è¿™é‡Œç®€å•å®ç°ä¸€ä¸‹æ”¯ä»˜ç½‘å…³å‘èµ·æ”¯ä»˜åŠŸèƒ½æ˜¯å¦‚ä½•ä½¿ç”¨ä»£ç†æ¨¡å¼çš„ã€‚

```go
package main

import (
   "fmt"
)

/**
 * @Description: æ”¯ä»˜æ¥å£ï¼ŒåªåŒ…å«å‘èµ·æ”¯ä»˜åŠŸèƒ½
 */
type PaymentService interface {
   pay(order string) string
}

/**
 * @Description: å¾®ä¿¡æ”¯ä»˜ç±»
 */
type WXPay struct {
}

/**
 * @Description: å¾®ä¿¡æ”¯ä»˜ç±»ï¼Œä»å¾®ä¿¡è·å–æ”¯ä»˜token
 * @receiver w
 * @param order
 * @return string
 */
func (w *WXPay) pay(order string) string {
   return "ä»å¾®ä¿¡è·å–æ”¯ä»˜token"
}

/**
 * @Description: é˜¿é‡Œæ”¯ä»˜ç±»
 */
type AliPay struct {
}

/**
 * @Description: é˜¿é‡Œæ”¯ä»˜ç±»ï¼Œä»é˜¿é‡Œè·å–æ”¯ä»˜token
 * @receiver a
 * @param order
 * @return string
 */
func (a *AliPay) pay(order string) string {
   return "ä»é˜¿é‡Œè·å–æ”¯ä»˜token"
}

/**
 * @Description: æ”¯ä»˜ä»£ç†ç±»
 */
type PaymentProxy struct {
   realPay PaymentService
}

/**
 * @Description: åšæ ¡éªŒç­¾åã€åˆå§‹åŒ–è®¢å•æ•°æ®ã€å‚æ•°æ£€æŸ¥ã€è®°å½•æ—¥å¿—ã€ç»„è£…è¿™ç§é€šç”¨æ€§æ“ä½œï¼Œè°ƒç”¨çœŸæ­£æ”¯ä»˜ç±»è·å–token
 * @receiver p
 * @param order
 * @return string
 */
func (p *PaymentProxy) pay(order string) string {
   fmt.Println("å¤„ç†" + order)
   fmt.Println("1æ ¡éªŒç­¾å")
   fmt.Println("2æ ¼å¼åŒ–è®¢å•æ•°æ®")
   fmt.Println("3å‚æ•°æ£€æŸ¥")
   fmt.Println("4è®°å½•è¯·æ±‚æ—¥å¿—")
   token := p.realPay.pay(order)
   return "http://ç»„è£…" + token + "ç„¶åè·³è½¬åˆ°ç¬¬ä¸‰æ–¹æ”¯ä»˜"
}
func main() {
   proxy := &PaymentProxy{
      realPay: &AliPay{},
   }
   url := proxy.pay("é˜¿é‡Œè®¢å•")
   fmt.Println(url)
}
```

è¾“å‡ºä¸ºï¼š

âœ myproject go run main.go

å¤„ç†é˜¿é‡Œè®¢å•

1æ ¡éªŒç­¾å

2æ ¼å¼åŒ–è®¢å•æ•°æ®

3å‚æ•°æ£€æŸ¥

4è®°å½•è¯·æ±‚æ—¥å¿—

ä»£ç æ¯”è¾ƒç®€å•ï¼Œä½†æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ï¼Œå¤§å®¶å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœå†ä½¿ç”¨ä¸Šå·¥å‚æ¨¡å¼ï¼Œæ˜¯ä¸æ˜¯å°±å…¨è‡ªåŠ¨åŒ–äº†ï¼Œä»Šåæ¥å…¥æ–°çš„ç¬¬ä¸‰æ–¹æ”¯ä»˜ï¼Œåªéœ€è¦å¼€å‘æ–°çš„æ”¯ä»˜ç±»ï¼Œæ¡†æ¶ä¸Šå‡ ä¹ä¸éœ€è¦ä¿®æ”¹ï¼Œç ”å‘å’Œæµ‹è¯•çš„æˆæœ¬ä¼šé™ä½å¾ˆå¤šã€‚è¿™ä¹Ÿè§£é‡Šäº†è®¾è®¡æ¨¡å¼çš„å¦™ç”¨ã€‚

### æ€»ç»“

ä»£ç†æ¨¡å¼ç®€å•å®ç”¨ï¼Œä½¿ç”¨å¾—å½“èƒ½è®©ç³»ç»Ÿå¯æ‰©å±•æ€§å¢å¼ºã€‚å®ƒèƒ½å¸®åŠ©å¼€å‘è€…å®ç°å…·ä½“ä¸šåŠ¡å’Œé€šç”¨é€»è¾‘çš„åˆ†ç¦»ï¼Œæ˜¯å¼€å‘è€…åªéœ€å…³æ³¨å…·ä½“ä¸šåŠ¡ï¼Œæ»¡è¶³å¼€æ”¾-å°é—­ã€é‡Œæ°æ›¿æ¢ã€ä¾èµ–å€’è½¬ç­‰åŸåˆ™ã€‚

## è£…é¥°å™¨æ¨¡å¼

è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå…è®¸å‘ç°æœ‰å¯¹è±¡**åŠ¨æ€æ·»åŠ æ–°åŠŸèƒ½**ï¼Œç›¸æ¯”ä»£ç†æ¨¡å¼æ›´å¼ºè°ƒ**åŠŸèƒ½çš„å åŠ å’Œç»„åˆ**ã€‚ä¸¤ç§æ¨¡å¼åœ¨ç»“æ„ä¸Šç›¸ä¼¼ï¼Œä½†æ ¸å¿ƒç›®çš„ä¸åŒï¼ˆè£…é¥°å™¨ä¾§é‡åŠŸèƒ½å¢å¼ºï¼Œä»£ç†ä¾§é‡è®¿é—®æ§åˆ¶ï¼‰ã€‚

------

### Go å®ç°è£…é¥°å™¨æ¨¡å¼çš„ç‰¹ç‚¹

1. **æ¥å£ç»„åˆ**ï¼šé€šè¿‡å®ç°ç›¸åŒæ¥å£å®ç°åµŒå¥—åŒ…è£…
2. **é“¾å¼è°ƒç”¨**ï¼šæ”¯æŒå¤šå±‚è£…é¥°å™¨å åŠ 
3. **è¿è¡Œæ—¶æ‰©å±•**ï¼šåŠ¨æ€å¢å‡åŠŸèƒ½ä¸å½±å“åŸä»£ç 
4. **é€æ˜æ€§**ï¼šå®¢æˆ·ç«¯æ— éœ€æ„ŸçŸ¥è£…é¥°å™¨å­˜åœ¨

------

### åœºæ™¯ç¤ºä¾‹ï¼šæ•°æ®å¤„ç†å™¨

å®ç°ä¸€ä¸ªæ•°æ®å¤„ç†å™¨ï¼Œæ”¯æŒé€šè¿‡è£…é¥°å™¨åŠ¨æ€æ·»åŠ ï¼š

- åŠ å¯†/è§£å¯†åŠŸèƒ½
- å‹ç¼©/è§£å‹åŠŸèƒ½
- æ—¥å¿—è®°å½•åŠŸèƒ½

#### ä»£ç å®ç°ï¼š

```go
package main

import (
	"fmt"
	"strings"
)

// æ ¸å¿ƒæ¥å£
type DataProcessor interface {
	Process(data string) string
}

// ----------------- åŸºç¡€å®ç° -----------------
type BasicProcessor struct{}

func (p *BasicProcessor) Process(data string) string {
	return data
}

// ----------------- è£…é¥°å™¨åŸºç±» -----------------
type ProcessorDecorator struct {
	wrapped DataProcessor
}

func (d *ProcessorDecorator) Process(data string) string {
	return d.wrapped.Process(data)
}

// ----------------- å…·ä½“è£…é¥°å™¨ -----------------
// åŠ å¯†è£…é¥°å™¨
type EncryptDecorator struct {
	ProcessorDecorator
	key string
}

func NewEncryptDecorator(wrapped DataProcessor, key string) *EncryptDecorator {
	return &EncryptDecorator{
		ProcessorDecorator: ProcessorDecorator{wrapped: wrapped},
		key:                key,
	}
}

func (d *EncryptDecorator) Process(data string) string {
	// æ¨¡æ‹ŸåŠ å¯†ï¼ˆå®é™…åº”ä½¿ç”¨æ ‡å‡†åŠ å¯†ç®—æ³•ï¼‰
	encrypted := fmt.Sprintf("ENC(%s|%s)", d.key, data)
	return d.wrapped.Process(encrypted)
}

// å‹ç¼©è£…é¥°å™¨
type CompressDecorator struct {
	ProcessorDecorator
}

func NewCompressDecorator(wrapped DataProcessor) *CompressDecorator {
	return &CompressDecorator{
		ProcessorDecorator: ProcessorDecorator{wrapped: wrapped},
	}
}

func (d *CompressDecorator) Process(data string) string {
	// æ¨¡æ‹Ÿå‹ç¼©ï¼ˆå®é™…å¯ç”¨zlibç­‰ï¼‰
	compressed := fmt.Sprintf("ZIP(%s)", data)
	return d.wrapped.Process(compressed)
}

// æ—¥å¿—è£…é¥°å™¨
type LogDecorator struct {
	ProcessorDecorator
}

func NewLogDecorator(wrapped DataProcessor) *LogDecorator {
	return &LogDecorator{
		ProcessorDecorator: ProcessorDecorator{wrapped: wrapped},
	}
}

func (d *LogDecorator) Process(data string) string {
	fmt.Printf("[LOG] Input data: %s\n", data)
	result := d.wrapped.Process(data)
	fmt.Printf("[LOG] Output data: %s\n", result)
	return result
}

// ----------------- ä½¿ç”¨ç¤ºä¾‹ -----------------
func main() {
	// åŸºç¡€å¤„ç†å™¨
	base := &BasicProcessor{}

	// ç»„åˆè£…é¥°å™¨ï¼ˆåŠ å¯† -> å‹ç¼© -> æ—¥å¿—ï¼‰
	processor := NewLogDecorator(
		NewCompressDecorator(
			NewEncryptDecorator(base, "secret-key"),
		),
	)

	input := "Hello, Decorator Pattern!"
	output := processor.Process(input)

	fmt.Println("\nFinal Result:")
	fmt.Println("Input :", input)
	fmt.Println("Output:", output)

	// åŠ¨æ€ç§»é™¤å‹ç¼©å±‚
	fmt.Println("\nWithout Compression:")
	simpleProcessor := NewLogDecorator(
		NewEncryptDecorator(base, "secret-key"),
	)
	fmt.Println(simpleProcessor.Process(input))
}
```

------

### æ‰§è¡Œç»“æœ

```shell
[LOG] Input data: ZIP(ENC(secret-key|Hello, Decorator Pattern!))
[LOG] Output data: ZIP(ENC(secret-key|Hello, Decorator Pattern!))

Final Result:
Input : Hello, Decorator Pattern!
Output: ZIP(ENC(secret-key|Hello, Decorator Pattern!))

Without Compression:
[LOG] Input data: ENC(secret-key|Hello, Decorator Pattern!)
[LOG] Output data: ENC(secret-key|Hello, Decorator Pattern!)
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **æ¥å£ä¸€è‡´æ€§**ï¼šæ‰€æœ‰è£…é¥°å™¨å®ç°ç›¸åŒçš„`DataProcessor`æ¥å£
2. **åµŒå¥—ç»“æ„**ï¼šè£…é¥°å™¨åŒ…å«è¢«è£…é¥°å¯¹è±¡çš„å®ä¾‹
3. **çµæ´»ç»„åˆ**ï¼šè£…é¥°é¡ºåºå½±å“æœ€ç»ˆç»“æœï¼ˆå¦‚å…ˆåŠ å¯†åå‹ç¼© vs å…ˆå‹ç¼©ååŠ å¯†ï¼‰
4. **å¼€é—­åŸåˆ™**ï¼šæ–°å¢è£…é¥°å™¨æ— éœ€ä¿®æ”¹å·²æœ‰ä»£ç 

------

### è£…é¥°å™¨ vs ä»£ç†æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§       | è£…é¥°å™¨æ¨¡å¼     | ä»£ç†æ¨¡å¼             |
| :--------- | :------------- | :------------------- |
| ä¸»è¦ç›®çš„   | åŠŸèƒ½å¢å¼ºå’Œç»„åˆ | è®¿é—®æ§åˆ¶å’Œç®¡ç†       |
| å¯¹è±¡å…³ç³»   | å¹³ç­‰åŒ…è£…å…³ç³»   | ä»£è¡¨/æ›¿ä»£å…³ç³»        |
| å…³æ³¨ç‚¹     | åŠ¨æ€æ·»åŠ åŠŸèƒ½   | æ§åˆ¶å¯¹è±¡è®¿é—®         |
| æ¥å£æ–¹æ³•   | å¯èƒ½æ‰©å±•æ–°æ–¹æ³• | ä¿æŒä¸åŸå¯¹è±¡ç›¸åŒæ¥å£ |
| åˆå§‹åŒ–æ—¶æœº | é€šå¸¸æå‰åˆå§‹åŒ– | å¯èƒ½å»¶è¿Ÿåˆå§‹åŒ–       |

------

### å®é™…åº”ç”¨åœºæ™¯

1. HTTPä¸­é—´ä»¶é“¾ï¼ˆå¦‚Ginæ¡†æ¶ï¼‰
2. IOæµå¤„ç†ï¼ˆå¦‚gzip.Writerï¼‰
3. ä¸šåŠ¡é€»è¾‘çš„æƒé™æ ¡éªŒå±‚
4. æ•°æ®è½¬æ¢æµæ°´çº¿
5. æ—¥å¿—è®°å½•ç³»ç»Ÿ

è£…é¥°å™¨æ¨¡å¼é€šè¿‡çµæ´»çš„å¯¹è±¡åŒ…è£…æœºåˆ¶ï¼Œä¸ºGoè¯­è¨€å®ç°åŠŸèƒ½æ‰©å±•æä¾›äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆéœ€è¦åŠ¨æ€ç»„åˆå¤šç§åŠŸèƒ½çš„åœºæ™¯ã€‚

## ç»„åˆæ¨¡å¼

ç»„åˆæ¨¡å¼æ˜¯ä¸€ç§**ç»“æ„å‹è®¾è®¡æ¨¡å¼**ï¼Œç”¨äºå°†å¯¹è±¡ç»„ç»‡æˆ**æ ‘å½¢ç»“æ„**ï¼Œä½¿å®¢æˆ·ç«¯å¯ä»¥**ç»Ÿä¸€å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡**ã€‚è¯¥æ¨¡å¼ç‰¹åˆ«é€‚åˆå¤„ç†å…·æœ‰é€’å½’å±‚æ¬¡ç»“æ„çš„åœºæ™¯ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€UIç»„ä»¶åµŒå¥—ç­‰ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **ç»„ä»¶æ¥å£ï¼ˆComponentï¼‰**ï¼šå®šä¹‰æ‰€æœ‰å¯¹è±¡çš„é€šç”¨è¡Œä¸º
2. **å¶å­èŠ‚ç‚¹ï¼ˆLeafï¼‰**ï¼šè¡¨ç¤ºæ ‘å½¢ç»“æ„çš„æœ«ç«¯å¯¹è±¡
3. **å¤åˆèŠ‚ç‚¹ï¼ˆCompositeï¼‰**ï¼šåŒ…å«å­ç»„ä»¶çš„å®¹å™¨å¯¹è±¡

------

### Go å®ç°ç¤ºä¾‹ï¼šæ–‡ä»¶ç³»ç»Ÿåˆ†æ

å®ç°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿåˆ†æå·¥å…·ï¼Œæ”¯æŒï¼š

- ç»Ÿä¸€å¤„ç†æ–‡ä»¶å’Œç›®å½•
- è®¡ç®—ç›®å½•æ€»å¤§å°ï¼ˆé€’å½’ç»Ÿè®¡åŒ…å«æ–‡ä»¶ï¼‰
- æ˜¾ç¤ºåµŒå¥—ç»“æ„

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import (
	"fmt"
	"strings"
)

// ================== ç»„ä»¶æ¥å£ ==================
type FileSystemComponent interface {
	Name() string
	Size() int
	Print(indent string)
}

// ================== å¶å­èŠ‚ç‚¹ ==================
type File struct {
	name string
	size int
}

func NewFile(name string, size int) *File {
	return &File{name: name, size: size}
}

func (f *File) Name() string {
	return f.name
}

func (f *File) Size() int {
	return f.size
}

func (f *File) Print(indent string) {
	fmt.Printf("%sğŸ“„ %s (%d KB)\n", indent, f.name, f.size)
}

// ================== å¤åˆèŠ‚ç‚¹ ==================
type Directory struct {
	name     string
	children []FileSystemComponent
}

func NewDirectory(name string) *Directory {
	return &Directory{name: name}
}

func (d *Directory) Name() string {
	return d.name
}

func (d *Directory) Size() int {
	total := 0
	for _, child := range d.children {
		total += child.Size()
	}
	return total
}

func (d *Directory) Print(indent string) {
	fmt.Printf("%sğŸ“ %s (%d KB)\n", indent, d.name, d.Size())
	newIndent := indent + "â”‚  "
	for _, child := range d.children {
		child.Print(newIndent)
	}
}

func (d *Directory) Add(component FileSystemComponent) {
	d.children = append(d.children, component)
}

func (d *Directory) Remove(component FileSystemComponent) {
	for i, c := range d.children {
		if c == component {
			d.children = append(d.children[:i], d.children[i+1:]...)
			break
		}
	}
}

// ================== ä½¿ç”¨ç¤ºä¾‹ ==================
func main() {
	// åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿç»“æ„
	root := NewDirectory("æ ¹ç›®å½•")
	
	documents := NewDirectory("æ–‡æ¡£")
	documents.Add(NewFile("ç®€å†.pdf", 256))
	documents.Add(NewFile("åˆåŒ.doc", 512))

	photos := NewDirectory("ç…§ç‰‡")
	photos.Add(NewFile("å©šç¤¼.jpg", 2048))
	photos.Add(NewFile("æ—…è¡Œ.png", 1024))

	downloads := NewDirectory("ä¸‹è½½")
	downloads.Add(NewFile("ç”µå½±.mp4", 4096))
	
	// æ„å»ºåµŒå¥—ç»“æ„
	root.Add(documents)
	root.Add(photos)
	photos.Add(downloads)

	// æ‰“å°ç»“æ„
	fmt.Println("æ–‡ä»¶ç³»ç»Ÿç»“æ„:")
	root.Print("")

	// ç»Ÿä¸€æ“ä½œç¤ºä¾‹
	fmt.Println("\næ‰€æœ‰ç»„ä»¶å¤§å°:")
	components := []FileSystemComponent{
		root,
		documents,
		downloads,
		NewFile("test.txt", 128),
	}
	
	for _, c := range components {
		fmt.Printf("%-15s â‡’ %5d KB\n", c.Name(), c.Size())
	}
}
```

------

### æ‰§è¡Œç»“æœ

```shell
æ–‡ä»¶ç³»ç»Ÿç»“æ„:
ğŸ“ æ ¹ç›®å½• (7936 KB)
â”‚  ğŸ“ æ–‡æ¡£ (768 KB)
â”‚  â”‚  ğŸ“„ ç®€å†.pdf (256 KB)
â”‚  â”‚  ğŸ“„ åˆåŒ.doc (512 KB)
â”‚  ğŸ“ ç…§ç‰‡ (7168 KB)
â”‚  â”‚  ğŸ“„ å©šç¤¼.jpg (2048 KB)
â”‚  â”‚  ğŸ“„ æ—…è¡Œ.png (1024 KB)
â”‚  â”‚  ğŸ“ ä¸‹è½½ (4096 KB)
â”‚  â”‚  â”‚  ğŸ“„ ç”µå½±.mp4 (4096 KB)

æ‰€æœ‰ç»„ä»¶å¤§å°:
æ ¹ç›®å½•          â‡’  7936 KB
æ–‡æ¡£            â‡’   768 KB
ä¸‹è½½            â‡’  4096 KB
test.txt       â‡’   128 KB
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **ç»Ÿä¸€æ¥å£**ï¼šæ–‡ä»¶å’Œç›®å½•å®ç°ç›¸åŒçš„`FileSystemComponent`æ¥å£
2. **é€’å½’è®¡ç®—**ï¼šç›®å½•å¤§å°é€šè¿‡éå†å­ç»„ä»¶é€’å½’è®¡ç®—
3. **ç»“æ„å±•ç¤º**ï¼šä½¿ç”¨ç¼©è¿›ç¬¦å·å±•ç¤ºåµŒå¥—å±‚çº§
4. **åŠ¨æ€ç»„åˆ**ï¼šè¿è¡Œæ—¶åŠ¨æ€æ·»åŠ /ç§»é™¤å­ç»„ä»¶

------

### ç»„åˆæ¨¡å¼ vs è£…é¥°å™¨æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§     | ç»„åˆæ¨¡å¼         | è£…é¥°å™¨æ¨¡å¼       |
| :------- | :--------------- | :--------------- |
| æ ¸å¿ƒç›®çš„ | æ„å»ºæ ‘å½¢ç»“æ„     | åŠ¨æ€æ·»åŠ åŠŸèƒ½     |
| ç»„ä»¶å…³ç³» | çˆ¶å­åŒ…å«å…³ç³»     | åŒ…è£…å¢å¼ºå…³ç³»     |
| æ¥å£æ–¹æ³• | ç»Ÿä¸€æ¥å£         | ç›¸åŒæ¥å£         |
| å…¸å‹åº”ç”¨ | æ–‡ä»¶ç³»ç»Ÿã€UIç»„ä»¶ | IOæµå¤„ç†ã€ä¸­é—´ä»¶ |

------

### å®é™…åº”ç”¨åœºæ™¯

1. ç»„ç»‡æ¶æ„ç®¡ç†ç³»ç»Ÿï¼ˆéƒ¨é—¨ä¸å‘˜å·¥ï¼‰
2. å›¾å½¢ç•Œé¢ç»„ä»¶æ ‘ï¼ˆçª—å£åŒ…å«é¢æ¿å’Œæ§ä»¶ï¼‰
3. ç”µå•†ç±»ç›®ç³»ç»Ÿï¼ˆå¤šçº§å•†å“åˆ†ç±»ï¼‰
4. æ¸¸æˆåœºæ™¯å›¾ï¼ˆåœºæ™¯åŒ…å«è§’è‰²å’Œé“å…·ï¼‰
5. è¯­æ³•æ ‘è§£æï¼ˆç¨‹åºä»£ç ç»“æ„åˆ†æï¼‰

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **éšå¼æ¥å£**ï¼šè‡ªåŠ¨æ»¡è¶³æ¥å£å®ç°ï¼Œæ— éœ€æ˜¾å¼å£°æ˜
2. **ç»“æ„ä½“ç»„åˆ**ï¼šé€šè¿‡åµŒå…¥å®ç°ä»£ç å¤ç”¨
3. **ç®€æ´çš„æ ‘æ“ä½œ**ï¼šåˆ‡ç‰‡æ“ä½œç®€åŒ–å­ç»„ä»¶ç®¡ç†
4. **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶æ£€æŸ¥ç»„ä»¶ç±»å‹

ç»„åˆæ¨¡å¼é€šè¿‡ç»Ÿä¸€æ¥å£å¤„ç†æ ‘å½¢ç»“æ„ä¸­çš„ä¸åŒèŠ‚ç‚¹ï¼Œä½¿å¾—å¤æ‚å±‚æ¬¡ç»“æ„çš„æ“ä½œå˜å¾—ç®€å•ç›´è§‚ï¼Œæ˜¯å¤„ç†é€’å½’åµŒå¥—æ•°æ®çš„ç†æƒ³é€‰æ‹©ã€‚

## é€‚é…å™¨æ¨¡å¼

é€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§**ç»“æ„å‹è®¾è®¡æ¨¡å¼**ï¼Œç”¨äº**å°†ä¸å…¼å®¹çš„æ¥å£è½¬æ¢ä¸ºå¯å…¼å®¹çš„æ¥å£**ï¼Œä½¿å¾—åŸæœ¬æ— æ³•ååŒå·¥ä½œçš„ç±»å¯ä»¥ååŒå·¥ä½œã€‚å…¶æ ¸å¿ƒæ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´å±‚ï¼ˆé€‚é…å™¨ï¼‰æ¥è§£å†³æ¥å£ä¸åŒ¹é…é—®é¢˜ã€‚

------

### é€‚é…å™¨æ¨¡å¼æ ¸å¿ƒè§’è‰²

1. **ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰**ï¼šå®¢æˆ·ç«¯æœŸæœ›çš„æ¥å£è§„èŒƒ
2. **è¢«é€‚é…è€…ï¼ˆAdapteeï¼‰**ï¼šéœ€è¦è¢«é€‚é…çš„ç°æœ‰å®ç°
3. **é€‚é…å™¨ï¼ˆAdapterï¼‰**ï¼šå®ç°ç›®æ ‡æ¥å£å¹¶åŒ…è£…è¢«é€‚é…è€…çš„ä¸­é—´å±‚

------

### Go å®ç°ç¤ºä¾‹ï¼šæ”¯ä»˜ç½‘å…³é›†æˆ

å‡è®¾éœ€è¦é›†æˆä¸¤ä¸ªä¸åŒæ”¯ä»˜æœåŠ¡å•†ï¼š

- **æ”¯ä»˜å®**ï¼šä½¿ç”¨ `AliPay{}` ç»“æ„ä½“ï¼Œæ–¹æ³•åä¸º `AliPayment(amount float64)`
- **å¾®ä¿¡æ”¯ä»˜**ï¼šä½¿ç”¨ `WeChatPay{}` ç»“æ„ä½“ï¼Œæ–¹æ³•åä¸º `WXTransfer(money float64)`

éœ€è¦ç»Ÿä¸€ä¸ºé€šç”¨æ”¯ä»˜æ¥å£ `PaymentGateway`ï¼š

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import (
	"fmt"
	"math"
)

// ================== ç›®æ ‡æ¥å£ ==================
type PaymentGateway interface {
	Pay(amount float64) string
}

// ================== è¢«é€‚é…å¯¹è±¡ ==================
// æ”¯ä»˜å®æ—§æ¥å£
type AliPay struct{}

func (a *AliPay) AliPayment(amount float64) string {
	return fmt.Sprintf("æ”¯ä»˜å®æ”¯ä»˜æˆåŠŸï¼š%.2få…ƒ", amount)
}

// å¾®ä¿¡æ”¯ä»˜æ—§æ¥å£
type WeChatPay struct{}

func (w *WeChatPay) WXTransfer(money float64) string {
	return fmt.Sprintf("å¾®ä¿¡æ”¯ä»˜æˆåŠŸï¼š%.2få…ƒ", money)
}

// ================== é€‚é…å™¨ ==================
// æ”¯ä»˜å®é€‚é…å™¨
type AliPayAdapter struct {
	aliPay *AliPay
}

func NewAliPayAdapter() *AliPayAdapter {
	return &AliPayAdapter{aliPay: &AliPay{}}
}

func (a *AliPayAdapter) Pay(amount float64) string {
	// é‡‘é¢å•ä½è½¬æ¢ï¼ˆå‡è®¾éœ€è¦å…ƒè½¬åˆ†ï¼‰
	amount = math.Round(amount*100) / 100
	return a.aliPay.AliPayment(amount)
}

// å¾®ä¿¡æ”¯ä»˜é€‚é…å™¨
type WeChatAdapter struct {
	wxPay *WeChatPay
}

func NewWeChatAdapter() *WeChatAdapter {
	return &WeChatAdapter{wxPay: &WeChatPay{}}
}

func (w *WeChatAdapter) Pay(amount float64) string {
	// å¾®ä¿¡æ¥å£éœ€è¦æ•´æ•°é‡‘é¢ï¼ˆå•ä½ï¼šåˆ†ï¼‰
	yuan := int(math.Round(amount * 100))
	return w.wxPay.WXTransfer(float64(yuan)/100)
}

// ================== å®¢æˆ·ç«¯è°ƒç”¨ ==================
func ProcessPayment(gateway PaymentGateway, amount float64) {
	fmt.Println(gateway.Pay(amount))
}

func main() {
	// ä½¿ç”¨æ”¯ä»˜å®é€‚é…å™¨
	aliGateway := NewAliPayAdapter()
	ProcessPayment(aliGateway, 99.99)

	// ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜é€‚é…å™¨
	wxGateway := NewWeChatAdapter()
	ProcessPayment(wxGateway, 199.95)
}
```

------

### æ‰§è¡Œç»“æœ

```shell
æ”¯ä»˜å®æ”¯ä»˜æˆåŠŸï¼š99.99å…ƒ
å¾®ä¿¡æ”¯ä»˜æˆåŠŸï¼š199.95å…ƒ
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **æ¥å£ç»Ÿä¸€**ï¼šæ‰€æœ‰é€‚é…å™¨å®ç°ç›¸åŒçš„ `PaymentGateway` æ¥å£
2. **å¯¹è±¡ç»„åˆ**ï¼šé€‚é…å™¨é€šè¿‡æŒæœ‰è¢«é€‚é…å¯¹è±¡å®ä¾‹å®ç°åŠŸèƒ½å§”æ´¾
3. **è½¬æ¢é€»è¾‘**ï¼šåœ¨é€‚é…å™¨ä¸­å¤„ç†å‚æ•°è½¬æ¢ã€å•ä½è½¬æ¢ç­‰å…¼å®¹é€»è¾‘
4. **é€æ˜è°ƒç”¨**ï¼šå®¢æˆ·ç«¯æ— éœ€å…³æ³¨åº•å±‚å…·ä½“å®ç°

------

### é€‚é…å™¨æ¨¡å¼å˜ä½“

| ç±»å‹       | è¯´æ˜                         | Goå®ç°æ–¹å¼           |
| :--------- | :--------------------------- | :------------------- |
| å¯¹è±¡é€‚é…å™¨ | é€šè¿‡ç»„åˆæ–¹å¼å®ç°ï¼ˆæ¨èï¼‰     | ç»“æ„ä½“åµŒå¥—è¢«é€‚é…å¯¹è±¡ |
| ç±»é€‚é…å™¨   | é€šè¿‡å¤šé‡ç»§æ‰¿å®ç°ï¼ˆGoä¸æ”¯æŒï¼‰ | ä¸é€‚ç”¨               |

------

### å®é™…åº”ç”¨åœºæ™¯

1. é›†æˆç¬¬ä¸‰æ–¹åº“/APIæ—¶æ¥å£ä¸åŒ¹é…
2. ç³»ç»Ÿå‡çº§è¿‡ç¨‹ä¸­å…¼å®¹æ—§ç‰ˆæ¥å£
3. ç»Ÿä¸€å¤šä¸ªç›¸ä¼¼åŠŸèƒ½çš„ä¸åŒå®ç°
4. æ•°æ®æ ¼å¼è½¬æ¢ï¼ˆå¦‚XMLè½¬JSONï¼‰
5. è®¾å¤‡é©±åŠ¨å…¼å®¹å±‚å¼€å‘

------

### æ¨¡å¼å¯¹æ¯”ï¼šé€‚é…å™¨ vs è£…é¥°å™¨ vs ä»£ç†

| æ¨¡å¼   | æ ¸å¿ƒç›®çš„     | å…³ç³»ç±»å‹         |
| :----- | :----------- | :--------------- |
| é€‚é…å™¨ | **æ¥å£è½¬æ¢** | ä¸åŒæ¥å£é—´çš„æ¡¥æ¢ |
| è£…é¥°å™¨ | **åŠŸèƒ½å¢å¼º** | ç›¸åŒæ¥å£çš„åŒ…è£…å±‚ |
| ä»£ç†   | **è®¿é—®æ§åˆ¶** | ç›¸åŒæ¥å£çš„æ›¿èº«   |

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **éšå¼æ¥å£**ï¼šæ— éœ€æ˜¾å¼å£°æ˜å®ç°ï¼Œåªéœ€æ–¹æ³•åŒ¹é…
2. **çµæ´»ç»„åˆ**ï¼šé€šè¿‡ç»“æ„ä½“åµŒå¥—å®ç°å¯¹è±¡é€‚é…å™¨
3. **é›¶ä¾µå…¥æ€§**ï¼šæ— éœ€ä¿®æ”¹è¢«é€‚é…å¯¹è±¡æºç 

é€‚é…å™¨æ¨¡å¼æ˜¯è§£å†³ç³»ç»Ÿé›†æˆå’Œæ¥å£å…¼å®¹é—®é¢˜çš„åˆ©å™¨ï¼Œå°¤å…¶åœ¨å¤„ç†é—ç•™ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆæ—¶ï¼Œèƒ½æ˜¾è‘—æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚

## ç­–ç•¥æ¨¡å¼

ç­–ç•¥æ¨¡å¼æ˜¯ä¸€ç§**è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼**ï¼Œå…è®¸åœ¨è¿è¡Œæ—¶**åŠ¨æ€åˆ‡æ¢ç®—æ³•æˆ–ç­–ç•¥**ï¼Œé€šè¿‡å°†ç®—æ³•æ—è¿›è¡Œå°è£…ï¼Œä½¿å®ƒä»¬å¯ä»¥**ç›¸äº’æ›¿æ¢**ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·ç«¯ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **ç­–ç•¥æ¥å£**ï¼šå®šä¹‰ç®—æ³•çš„æŠ½è±¡è§„èŒƒ
2. **å…·ä½“ç­–ç•¥**ï¼šå®ç°æ¥å£çš„å…·ä½“ç®—æ³•
3. **ä¸Šä¸‹æ–‡å¯¹è±¡**ï¼šæŒæœ‰ç­–ç•¥å¼•ç”¨å¹¶æ‰§è¡Œç­–ç•¥

------

### Go å®ç°ç¤ºä¾‹ï¼šç”µå•†æŠ˜æ‰£ç³»ç»Ÿ

å®ç°ä¸‰ç§æŠ˜æ‰£ç­–ç•¥ï¼š

- æ— æŠ˜æ‰£
- ç™¾åˆ†æ¯”æŠ˜æ‰£
- æ»¡å‡æŠ˜æ‰£

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import "fmt"

// ================== ç­–ç•¥æ¥å£ ==================
type DiscountStrategy interface {
	CalculateDiscount(amount float64) float64
}

// ================== å…·ä½“ç­–ç•¥ ==================
// æ— æŠ˜æ‰£ç­–ç•¥
type NoDiscount struct{}

func (s *NoDiscount) CalculateDiscount(amount float64) float64 {
	return 0
}

// ç™¾åˆ†æ¯”æŠ˜æ‰£ç­–ç•¥
type PercentageDiscount struct {
	percentage float64 // æŠ˜æ‰£æ¯”ä¾‹ï¼ˆ0-1ï¼‰
}

func NewPercentageDiscount(p float64) *PercentageDiscount {
	return &PercentageDiscount{percentage: p}
}

func (s *PercentageDiscount) CalculateDiscount(amount float64) float64 {
	return amount * s.percentage
}

// æ»¡å‡æŠ˜æ‰£ç­–ç•¥
type ThresholdDiscount struct {
	threshold float64 // æ»¡å‡é—¨æ§›
	discount  float64 // å‡å…é‡‘é¢
}

func NewThresholdDiscount(t, d float64) *ThresholdDiscount {
	return &ThresholdDiscount{threshold: t, discount: d}
}

func (s *ThresholdDiscount) CalculateDiscount(amount float64) float64 {
	if amount >= s.threshold {
		return s.discount
	}
	return 0
}

// ================== ä¸Šä¸‹æ–‡å¯¹è±¡ ==================
type Order struct {
	amount         float64
	discountStrategy DiscountStrategy
}

func NewOrder(amount float64, strategy DiscountStrategy) *Order {
	return &Order{
		amount:          amount,
		discountStrategy: strategy,
	}
}

// åˆ‡æ¢ç­–ç•¥æ–¹æ³•
func (o *Order) SetStrategy(strategy DiscountStrategy) {
	o.discountStrategy = strategy
}

// è®¡ç®—å®é™…æ”¯ä»˜é‡‘é¢
func (o *Order) Checkout() float64 {
	discount := o.discountStrategy.CalculateDiscount(o.amount)
	return o.amount - discount
}

// ================== å®¢æˆ·ç«¯è°ƒç”¨ ==================
func main() {
	// åˆ›å»ºç­–ç•¥å¯¹è±¡
	noDiscount := &NoDiscount{}
	tenPercent := NewPercentageDiscount(0.1)       // 10%æŠ˜æ‰£
	full100minus20 := NewThresholdDiscount(100, 20) // æ»¡100å‡20

	// åˆå§‹è®¢å•ä½¿ç”¨æ— æŠ˜æ‰£
	order := NewOrder(150, noDiscount)
	fmt.Printf("åŸä»·: ï¿¥%.2f â†’ å®ä»˜: ï¿¥%.2f\n", order.amount, order.Checkout())

	// åŠ¨æ€åˆ‡æ¢ç­–ç•¥
	order.SetStrategy(tenPercent)
	fmt.Printf("åº”ç”¨10%%æŠ˜æ‰£ â†’ å®ä»˜: ï¿¥%.2f\n", order.Checkout())

	order.SetStrategy(full100minus20)
	fmt.Printf("åº”ç”¨æ»¡100å‡20 â†’ å®ä»˜: ï¿¥%.2f\n", order.Checkout())

	// æ–°è®¢å•ç›´æ¥ä½¿ç”¨ç»„åˆç­–ç•¥
	order2 := NewOrder(80, full100minus20)
	fmt.Printf("\nè®¢å•2 åŸä»·: ï¿¥%.2f â†’ å®ä»˜: ï¿¥%.2f", order2.amount, order2.Checkout())
}
```

------

### æ‰§è¡Œç»“æœ

```shell
åŸä»·: ï¿¥150.00 â†’ å®ä»˜: ï¿¥150.00
åº”ç”¨10%æŠ˜æ‰£ â†’ å®ä»˜: ï¿¥135.00
åº”ç”¨æ»¡100å‡20 â†’ å®ä»˜: ï¿¥130.00

è®¢å•2 åŸä»·: ï¿¥80.00 â†’ å®ä»˜: ï¿¥80.00
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **ç­–ç•¥éš”ç¦»**ï¼šæ¯ä¸ªç­–ç•¥ç‹¬ç«‹å®ç°ï¼Œäº’ä¸å½±å“
2. **è¿è¡Œæ—¶åˆ‡æ¢**ï¼šé€šè¿‡`SetStrategy()`æ–¹æ³•åŠ¨æ€ä¿®æ”¹ç­–ç•¥
3. **æ¶ˆé™¤æ¡ä»¶åˆ¤æ–­**ï¼šé¿å…å¤§é‡`if-else`é€»è¾‘åˆ†æ”¯
4. **å¼€é—­åŸåˆ™**ï¼šæ–°å¢ç­–ç•¥æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

------

### ç­–ç•¥æ¨¡å¼ vs å·¥å‚æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§     | ç­–ç•¥æ¨¡å¼            | å·¥å‚æ¨¡å¼           |
| :------- | :------------------ | :----------------- |
| æ ¸å¿ƒç›®çš„ | ç®—æ³•/ç­–ç•¥çš„åŠ¨æ€åˆ‡æ¢ | å¯¹è±¡çš„åˆ›å»ºå°è£…     |
| å…³æ³¨ç‚¹   | è¡Œä¸ºçš„é€‰æ‹©ä¸æ‰§è¡Œ    | å¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹   |
| ä½¿ç”¨åœºæ™¯ | å¤šä¸ªç›¸ä¼¼ç®—æ³•çš„åœºæ™¯  | å¤æ‚å¯¹è±¡çš„åˆ›å»ºåœºæ™¯ |
| å…¸å‹æ–¹æ³• | SetStrategy()       | CreateXXX()        |

------

### å®é™…åº”ç”¨åœºæ™¯

1. æ”¯ä»˜æ–¹å¼é€‰æ‹©ï¼ˆæ”¯ä»˜å®/å¾®ä¿¡/é“¶è”ï¼‰
2. å¯¼èˆªè·¯çº¿ç­–ç•¥ï¼ˆæœ€çŸ­è·¯å¾„/æœ€å°‘æ”¶è´¹/é¿å¼€é«˜é€Ÿï¼‰
3. æ•°æ®å‹ç¼©ç®—æ³•é€‰æ‹©ï¼ˆZIP/RAR/7zï¼‰
4. æ¸¸æˆAIè¡Œä¸ºç­–ç•¥ï¼ˆè¿›æ”»/é˜²å®ˆ/é€ƒè·‘ï¼‰
5. æœºå™¨å­¦ä¹ æ¨¡å‹é€‰æ‹©ï¼ˆéšæœºæ£®æ—/SVM/ç¥ç»ç½‘ç»œï¼‰

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **æ¥å£éšå¼å®ç°**ï¼šæ— éœ€æ˜¾å¼å£°æ˜ç­–ç•¥å®ç°æ¥å£
2. **ç»„åˆä¼˜äºç»§æ‰¿**ï¼šé€šè¿‡ç»“æ„ä½“ç»„åˆå®ç°ç­–ç•¥åˆ‡æ¢
3. **é¸­å­ç±»å‹ç‰¹æ€§**ï¼šç­–ç•¥å¯¹è±¡åªéœ€å®ç°çº¦å®šæ–¹æ³•å³å¯
4. **å¹¶å‘å®‰å…¨**ï¼šç­–ç•¥å¯¹è±¡é€šå¸¸ä¸ºæ— çŠ¶æ€ï¼Œé€‚åˆå¹¶å‘åœºæ™¯

ç­–ç•¥æ¨¡å¼é€šè¿‡è§£è€¦ç­–ç•¥å®šä¹‰ä¸ä½¿ç”¨ï¼Œæ˜¾è‘—æå‡ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ˜¯å¤„ç†å¤æ‚ä¸šåŠ¡è§„åˆ™å˜åŒ–çš„æœ‰æ•ˆæ‰‹æ®µã€‚

## æ¨¡æ¿æ–¹æ³•æ¨¡å¼

æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§**è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼**ï¼Œç”¨äºåœ¨çˆ¶ç±»ï¼ˆæˆ–åŸºç±»ï¼‰ä¸­**å®šä¹‰ç®—æ³•çš„éª¨æ¶**ï¼Œå°†æŸäº›æ­¥éª¤**å»¶è¿Ÿåˆ°å­ç±»**å®ç°ã€‚è¯¥æ¨¡å¼é€šè¿‡å›ºå®šç®—æ³•æµç¨‹ä¿è¯ç»“æ„ç»Ÿä¸€ï¼ŒåŒæ—¶å…è®¸å­ç±»çµæ´»å®ç°å…·ä½“æ­¥éª¤ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **æŠ½è±¡æ¨¡æ¿**ï¼šå®šä¹‰ç®—æ³•æ­¥éª¤ï¼ˆåŒ…å«å…·ä½“æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ï¼‰
2. **å…·ä½“å®ç°**ï¼šå­ç±»å®ç°æ¨¡æ¿ä¸­çš„æŠ½è±¡æ–¹æ³•
3. **æ¨¡æ¿æ–¹æ³•**ï¼šå°è£…ä¸å¯å˜çš„ç®—æ³•æµç¨‹

------

### Go å®ç°ç¤ºä¾‹ï¼šé¥®æ–™åˆ¶ä½œç³»ç»Ÿ

å®ç°ä¸¤ç§é¥®æ–™çš„åˆ¶ä½œæµç¨‹ï¼š

- **å’–å•¡**ï¼šéœ€è¦åŠ ç³–å’Œç‰›å¥¶
- **èŒ¶**ï¼šéœ€è¦åŠ æŸ æª¬

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import "fmt"

// ================== æŠ½è±¡æ¨¡æ¿æ¥å£ ==================
type Beverage interface {
	Brew()           // å†²æ³¡ï¼ˆå­ç±»å®ç°ï¼‰
	AddCondiments()  // æ·»åŠ è°ƒæ–™ï¼ˆå­ç±»å®ç°ï¼‰
	BoilWater()      // ç…®æ°´ï¼ˆé€šç”¨å®ç°ï¼‰
	PourInCup()      // å€’å…¥æ¯å­ï¼ˆé€šç”¨å®ç°ï¼‰
	WantCondiments() bool // é’©å­æ–¹æ³•ï¼ˆå¯é€‰è¦†ç›–ï¼‰
}

// ================== æ¨¡æ¿åŸºç±» ==================
type BaseBeverage struct{}

// é€šç”¨æ­¥éª¤å®ç°
func (b *BaseBeverage) BoilWater() {
	fmt.Println("ç…®æ²¸æ°´")
}

func (b *BaseBeverage) PourInCup() {
	fmt.Println("å€’å…¥æ¯å­")
}

// é»˜è®¤é’©å­æ–¹æ³•ï¼ˆé»˜è®¤éœ€è¦è°ƒæ–™ï¼‰
func (b *BaseBeverage) WantCondiments() bool {
	return true
}

// ================== æ¨¡æ¿æ–¹æ³• ==================
func MakeBeverage(b Beverage) {
	fmt.Println("\n===== å¼€å§‹åˆ¶ä½œé¥®æ–™ =====")
	b.BoilWater()
	b.Brew()
	b.PourInCup()
	if b.WantCondiments() {
		b.AddCondiments()
	}
	fmt.Println("===== åˆ¶ä½œå®Œæˆ =====\n")
}

// ================== å…·ä½“å®ç° ==================
// å’–å•¡å®ç°
type Coffee struct {
	BaseBeverage // åµŒå…¥åŸºç±»
}

func (c *Coffee) Brew() {
	fmt.Println("å†²æ³¡å’–å•¡ç²‰")
}

func (c *Coffee) AddCondiments() {
	fmt.Println("åŠ å…¥ç³–å’Œç‰›å¥¶")
}

// èŒ¶å®ç°
type Tea struct {
	BaseBeverage
}

func (t *Tea) Brew() {
	fmt.Println("å†²æ³¡èŒ¶å¶")
}

func (t *Tea) AddCondiments() {
	fmt.Println("åŠ å…¥æŸ æª¬")
}

// çº¯å‡€æ°´ï¼ˆè¦†ç›–é’©å­æ–¹æ³•ï¼‰
type PlainWater struct {
	BaseBeverage
}

func (p *PlainWater) Brew() {
	fmt.Println("æ— éœ€å†²æ³¡ï¼Œç›´æ¥è£…æ°´")
}

func (p *PlainWater) AddCondiments() {} // ç©ºå®ç°

func (p *PlainWater) WantCondiments() bool {
	return false // ç¦ç”¨è°ƒæ–™
}

// ================== å®¢æˆ·ç«¯è°ƒç”¨ ==================
func main() {
	// åˆ¶ä½œå’–å•¡
	coffee := &Coffee{}
	MakeBeverage(coffee)

	// åˆ¶ä½œèŒ¶
	tea := &Tea{}
	MakeBeverage(tea)

	// åˆ¶ä½œçº¯å‡€æ°´
	water := &PlainWater{}
	MakeBeverage(water)
}
```

------

### æ‰§è¡Œç»“æœ

```shell
===== å¼€å§‹åˆ¶ä½œé¥®æ–™ =====
ç…®æ²¸æ°´
å†²æ³¡å’–å•¡ç²‰
å€’å…¥æ¯å­
åŠ å…¥ç³–å’Œç‰›å¥¶
===== åˆ¶ä½œå®Œæˆ =====

===== å¼€å§‹åˆ¶ä½œé¥®æ–™ =====
ç…®æ²¸æ°´
å†²æ³¡èŒ¶å¶
å€’å…¥æ¯å­
åŠ å…¥æŸ æª¬
===== åˆ¶ä½œå®Œæˆ =====

===== å¼€å§‹åˆ¶ä½œé¥®æ–™ =====
ç…®æ²¸æ°´
æ— éœ€å†²æ³¡ï¼Œç›´æ¥è£…æ°´
å€’å…¥æ¯å­
===== åˆ¶ä½œå®Œæˆ =====
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **æµç¨‹å›ºåŒ–**ï¼š`MakeBeverage` æ–¹æ³•å›ºå®šåˆ¶ä½œæµç¨‹
2. **æ­¥éª¤æ‹†åˆ†**ï¼šå°†å¯å˜æ­¥éª¤å£°æ˜ä¸ºæ¥å£æ–¹æ³•
3. **é’©å­æ–¹æ³•**ï¼šé€šè¿‡ `WantCondiments()` æ§åˆ¶å¯é€‰æ­¥éª¤
4. **ä»£ç å¤ç”¨**ï¼šé€šç”¨æ­¥éª¤åœ¨åŸºç±»ä¸­å®ç°

------

### æ¨¡æ¿æ–¹æ³• vs ç­–ç•¥æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§     | æ¨¡æ¿æ–¹æ³•æ¨¡å¼         | ç­–ç•¥æ¨¡å¼           |
| :------- | :------------------- | :----------------- |
| æ§åˆ¶çº§åˆ« | ç±»çº§åˆ«ï¼ˆç»§æ‰¿ä½“ç³»ï¼‰   | å¯¹è±¡çº§åˆ«ï¼ˆç»„åˆï¼‰   |
| ä¾§é‡ç‚¹   | ç®—æ³•æµç¨‹çš„å›ºå®š       | ç®—æ³•å®ç°çš„æ›¿æ¢     |
| æ‰©å±•æ–¹å¼ | é€šè¿‡å­ç±»ç»§æ‰¿æ‰©å±•     | é€šè¿‡ç­–ç•¥ç»„åˆæ‰©å±•   |
| é€‚ç”¨åœºæ™¯ | æœ‰å›ºå®šæµç¨‹çš„ç›¸ä¼¼ç®—æ³• | å®Œå…¨ä¸åŒçš„ç®—æ³•å®ç° |

------

### å®é™…åº”ç”¨åœºæ™¯

1. æ¡†æ¶çš„åˆå§‹åŒ–æµç¨‹æ§åˆ¶
2. è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹çš„é€šç”¨æ­¥éª¤
3. æ–‡æ¡£ç”Ÿæˆå™¨ï¼ˆå›ºå®šç”Ÿæˆæ­¥éª¤ï¼‰
4. æ•°æ®å¯¼å‡ºæµç¨‹ï¼ˆé€šç”¨å¯¼å‡ºæ­¥éª¤ï¼‰
5. æ¸¸æˆè§’è‰²AIè¡Œä¸ºæµç¨‹

------

### Goè¯­è¨€å®ç°ç‰¹ç‚¹

1. **ç»„åˆæ›¿ä»£ç»§æ‰¿**ï¼šé€šè¿‡ç»“æ„ä½“åµŒå¥—å®ç°ä»£ç å¤ç”¨
2. **æ¥å£éšå¼å®ç°**ï¼šæ— éœ€æ˜¾å¼å£°æ˜æ¥å£å®ç°å…³ç³»
3. **çµæ´»é’©å­æ–¹æ³•**ï¼šé€šè¿‡è¦†ç›–é»˜è®¤æ–¹æ³•å®ç°æµç¨‹æ§åˆ¶
4. **æ¸…æ™°èŒè´£åˆ’åˆ†**ï¼šåŸºç±»å¤„ç†é€šç”¨é€»è¾‘ï¼Œå­ç±»ä¸“æ³¨å…·ä½“å®ç°

æ¨¡æ¿æ–¹æ³•æ¨¡å¼é€šè¿‡è§„èŒƒåŒ–çš„æµç¨‹æ§åˆ¶ï¼Œåœ¨ä¿è¯ç³»ç»Ÿç¨³å®šæ€§çš„åŒæ—¶æé«˜äº†æ‰©å±•æ€§ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦ä¸¥æ ¼æµç¨‹æ§åˆ¶çš„ä¸šåŠ¡åœºæ™¯ã€‚

## è§‚å¯Ÿè€…æ¨¡å¼

è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§**è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼**ï¼Œç”¨äºå»ºç«‹å¯¹è±¡é—´çš„**ä¸€å¯¹å¤šä¾èµ–å…³ç³»**ã€‚å½“è¢«è§‚å¯Ÿå¯¹è±¡ï¼ˆä¸»é¢˜ï¼‰çŠ¶æ€å˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…ï¼‰ã€‚è¯¥æ¨¡å¼ä¹Ÿè¢«ç§°ä¸ºå‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **Subjectï¼ˆä¸»é¢˜ï¼‰**ï¼šç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œæä¾›è®¢é˜…/å–æ¶ˆè®¢é˜…æ–¹æ³•
2. **Observerï¼ˆè§‚å¯Ÿè€…ï¼‰**ï¼šå®šä¹‰æ›´æ–°é€šçŸ¥æ¥å£
3. **Concrete Subjectï¼ˆå…·ä½“ä¸»é¢˜ï¼‰**ï¼šçŠ¶æ€å˜åŒ–æ—¶è§¦å‘é€šçŸ¥
4. **Concrete Observerï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰**ï¼šå®ç°å…·ä½“çš„å“åº”é€»è¾‘

------

### Go å®ç°ç¤ºä¾‹ï¼šè‚¡ç¥¨ä»·æ ¼é€šçŸ¥ç³»ç»Ÿ

å®ç°ä¸€ä¸ªè‚¡ç¥¨ä»·æ ¼å˜åŠ¨é€šçŸ¥ç³»ç»Ÿï¼ŒåŒ…å«ï¼š

- è‚¡ç¥¨äº¤æ˜“æ‰€ï¼ˆä¸»é¢˜ï¼‰
- é‚®ä»¶é€šçŸ¥å’ŒçŸ­ä¿¡é€šçŸ¥ï¼ˆè§‚å¯Ÿè€…ï¼‰

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import (
	"fmt"
	"sync"
)

// ================== è§‚å¯Ÿè€…æ¥å£ ==================
type Observer interface {
	Update(stockName string, price float64)
}

// ================== ä¸»é¢˜æ¥å£ ==================
type StockSubject interface {
	Register(o Observer)
	Deregister(o Observer)
	NotifyAll()
}

// ================== å…·ä½“ä¸»é¢˜ ==================
type StockExchange struct {
	observers []Observer
	mutex     sync.Mutex
	stocks    map[string]float64 // è‚¡ç¥¨åç§° -> å½“å‰ä»·æ ¼
}

func NewStockExchange() *StockExchange {
	return &StockExchange{
		stocks: make(map[string]float64),
	}
}

// æ³¨å†Œè§‚å¯Ÿè€…ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
func (s *StockExchange) Register(o Observer) {
	s.mutex.Lock()
	defer s.mutex.Unlock()
	s.observers = append(s.observers, o)
}

// æ³¨é”€è§‚å¯Ÿè€…ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
func (s *StockExchange) Deregister(target Observer) {
	s.mutex.Lock()
	defer s.mutex.Unlock()
	for i, observer := range s.observers {
		if observer == target {
			s.observers = append(s.observers[:i], s.observers[i+1:]...)
			break
		}
	}
}

// æ›´æ–°è‚¡ç¥¨ä»·æ ¼å¹¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
func (s *StockExchange) UpdatePrice(stockName string, newPrice float64) {
	s.mutex.Lock()
	defer s.mutex.Unlock()
	oldPrice, exists := s.stocks[stockName]
	
	// åªæœ‰ä»·æ ¼å˜åŒ–è¶…è¿‡1%æ‰è§¦å‘é€šçŸ¥
	if exists && (newPrice-oldPrice)/oldPrice < 0.01 {
		return
	}
	
	s.stocks[stockName] = newPrice
	s.NotifyAll()
}

// é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ï¼ˆå†…éƒ¨æ–¹æ³•ï¼‰
func (s *StockExchange) NotifyAll() {
	for _, observer := range s.observers {
		for stock, price := range s.stocks {
			observer.Update(stock, price)
		}
	}
}

// ================== å…·ä½“è§‚å¯Ÿè€… ==================
// é‚®ä»¶é€šçŸ¥
type EmailNotifier struct {
	email string
}

func NewEmailNotifier(email string) *EmailNotifier {
	return &EmailNotifier{email: email}
}

func (e *EmailNotifier) Update(stockName string, price float64) {
	fmt.Printf("[Email] To %s: %s æœ€æ–°ä»·æ ¼ %.2f\n", e.email, stockName, price)
}

// çŸ­ä¿¡é€šçŸ¥
type SMSNotifier struct {
	phone string
}

func NewSMSNotifier(phone string) *SMSNotifier {
	return &SMSNotifier{phone: phone}
}

func (s *SMSNotifier) Update(stockName string, price float64) {
	fmt.Printf("[SMS] To %s: %s ä»·æ ¼å˜åŠ¨ %.2f\n", s.phone, stockName, price)
}

// ================== ä½¿ç”¨ç¤ºä¾‹ ==================
func main() {
	// åˆ›å»ºè‚¡ç¥¨äº¤æ˜“æ‰€
	exchange := NewStockExchange()

	// åˆ›å»ºè§‚å¯Ÿè€…
	emailNotify := NewEmailNotifier("admin@company.com")
	smsNotify := NewSMSNotifier("13800138000")

	// æ³¨å†Œè§‚å¯Ÿè€…
	exchange.Register(emailNotify)
	exchange.Register(smsNotify)

	// åˆå§‹ä»·æ ¼è®¾ç½®ï¼ˆä¸è§¦å‘é€šçŸ¥ï¼‰
	exchange.UpdatePrice("GOOG", 2500.00)

	// ç¬¬ä¸€æ¬¡ä»·æ ¼æ›´æ–°ï¼ˆè§¦å‘é€šçŸ¥ï¼‰
	fmt.Println("\n=== ç¬¬ä¸€æ¬¡ä»·æ ¼æ›´æ–° ===")
	exchange.UpdatePrice("GOOG", 2550.50)

	// ç¬¬äºŒæ¬¡ä»·æ ¼æ›´æ–°ï¼ˆå˜åŒ–ä¸è¶³1%ä¸è§¦å‘ï¼‰
	fmt.Println("\n=== ç¬¬äºŒæ¬¡ä»·æ ¼æ›´æ–° ===")
	exchange.UpdatePrice("GOOG", 2550.50*1.005) // +0.5%

	// ç¬¬ä¸‰æ¬¡ä»·æ ¼æ›´æ–°ï¼ˆè§¦å‘é€šçŸ¥ï¼‰
	fmt.Println("\n=== ç¬¬ä¸‰æ¬¡ä»·æ ¼æ›´æ–° ===")
	exchange.UpdatePrice("GOOG", 2550.50*1.02) // +2%

	// æ³¨é”€çŸ­ä¿¡é€šçŸ¥
	exchange.Deregister(smsNotify)

	// ç¬¬å››æ¬¡ä»·æ ¼æ›´æ–°ï¼ˆä»…é‚®ä»¶é€šçŸ¥ï¼‰
	fmt.Println("\n=== ç¬¬å››æ¬¡ä»·æ ¼æ›´æ–° ===")
	exchange.UpdatePrice("AAPL", 150.00)
}
```

------

### æ‰§è¡Œç»“æœ

```shell
=== ç¬¬ä¸€æ¬¡ä»·æ ¼æ›´æ–° ===
[Email] To admin@company.com: GOOG æœ€æ–°ä»·æ ¼ 2550.50
[SMS] To 13800138000: GOOG ä»·æ ¼å˜åŠ¨ 2550.50

=== ç¬¬äºŒæ¬¡ä»·æ ¼æ›´æ–° ===
ï¼ˆæ— è¾“å‡ºï¼‰

=== ç¬¬ä¸‰æ¬¡ä»·æ ¼æ›´æ–° ===
[Email] To admin@company.com: GOOG æœ€æ–°ä»·æ ¼ 2601.51
[SMS] To 13800138000: GOOG ä»·æ ¼å˜åŠ¨ 2601.51

=== ç¬¬å››æ¬¡ä»·æ ¼æ›´æ–° ===
[Email] To admin@company.com: AAPL æœ€æ–°ä»·æ ¼ 150.00
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **çº¿ç¨‹å®‰å…¨**ï¼šä½¿ç”¨`sync.Mutex`ä¿è¯å¹¶å‘å®‰å…¨
2. **ç²¾ç¡®é€šçŸ¥**ï¼šä»·æ ¼å˜åŒ–è¶…è¿‡1%æ‰è§¦å‘é€šçŸ¥
3. **æ‰¹é‡æ›´æ–°**ï¼šéå†æ‰€æœ‰è‚¡ç¥¨ä»·æ ¼è¿›è¡Œé€šçŸ¥
4. **åŠ¨æ€ç®¡ç†**ï¼šæ”¯æŒè¿è¡Œæ—¶æ·»åŠ /ç§»é™¤è§‚å¯Ÿè€…

------

### å®é™…åº”ç”¨åœºæ™¯

1. ç”¨æˆ·ç•Œé¢çš„äº‹ä»¶å“åº”
2. åˆ†å¸ƒå¼ç³»ç»ŸçŠ¶æ€åŒæ­¥
3. å®æ—¶æ•°æ®ç›‘æ§ç³»ç»Ÿ
4. ç¤¾äº¤åª’ä½“æ¶ˆæ¯æ¨é€
5. æ¸¸æˆå¼•æ“ä¸­çš„æˆå°±ç³»ç»Ÿ

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **æ¥å£çµæ´»æ€§**ï¼šéšå¼æ¥å£å®ç°é™ä½è€¦åˆ
2. **å¹¶å‘åŸç”Ÿæ”¯æŒ**ï¼šgoroutine + channel å®ç°å¼‚æ­¥é€šçŸ¥
3. **è½»é‡çº§çº¿ç¨‹**ï¼šé«˜æ•ˆå¤„ç†å¤§é‡è§‚å¯Ÿè€…
4. **ç»„åˆæ¨¡å¼**ï¼šé€šè¿‡ç»“æ„ä½“åµŒå¥—å®ç°åŠŸèƒ½æ‰©å±•

è§‚å¯Ÿè€…æ¨¡å¼é€šè¿‡è§£è€¦ä¸»é¢˜ä¸è§‚å¯Ÿè€…ï¼Œå®ç°äº†é«˜æ•ˆçš„çŠ¶æ€åŒæ­¥æœºåˆ¶ï¼Œæ˜¯æ„å»ºå“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒæ¨¡å¼ä¹‹ä¸€ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©åŒæ­¥/å¼‚æ­¥é€šçŸ¥æ–¹å¼ï¼Œå¹¶é…åˆchannelå®ç°æ›´å¤æ‚çš„æ¶ˆæ¯ä¼ é€’é€»è¾‘ã€‚

## å‘å¸ƒè®¢é˜…æ¨¡å¼

å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯ä¸€ç§**æ¶ˆæ¯ä¼ é€’èŒƒå¼**ï¼Œé€šè¿‡å¼•å…¥**ä¸­é—´ä»£ç†ï¼ˆBrokerï¼‰** å®ç°**ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„å®Œå…¨è§£è€¦**ã€‚ä¸è§‚å¯Ÿè€…æ¨¡å¼ä¸åŒï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…**äº’ä¸çŸ¥æ™“å¯¹æ–¹å­˜åœ¨**ï¼Œæ‰€æœ‰æ¶ˆæ¯é€šè¿‡ä¸»é¢˜ï¼ˆTopicï¼‰æˆ–é¢‘é“ï¼ˆChannelï¼‰è¿›è¡Œè·¯ç”±ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **Publisherï¼ˆå‘å¸ƒè€…ï¼‰**ï¼šå‘å¸ƒæ¶ˆæ¯åˆ°æŒ‡å®šä¸»é¢˜
2. **Subscriberï¼ˆè®¢é˜…è€…ï¼‰**ï¼šè®¢é˜…æ„Ÿå…´è¶£çš„ä¸»é¢˜
3. **Brokerï¼ˆä»£ç†ï¼‰**ï¼šç®¡ç†ä¸»é¢˜ä¸è®¢é˜…å…³ç³»ï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”±
4. **Topicï¼ˆä¸»é¢˜ï¼‰**ï¼šæ¶ˆæ¯çš„åˆ†ç±»é€šé“

------

### Go å®ç°ç¤ºä¾‹ï¼šæ–°é—»å‘å¸ƒç³»ç»Ÿ

å®ç°ä¸€ä¸ªæ”¯æŒå¤šä¸»é¢˜çš„æ–°é—»å‘å¸ƒç³»ç»Ÿï¼š

- æ”¯æŒåŠ¨æ€åˆ›å»º/è®¢é˜…ä¸»é¢˜
- æ”¯æŒæŒä¹…åŒ–æ¶ˆæ¯å†å²ï¼ˆä¿ç•™æœ€è¿‘5æ¡ï¼‰
- æ”¯æŒåŒæ­¥/å¼‚æ­¥æ¶ˆæ¯ä¼ é€’

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import (
	"fmt"
	"sync"
	"time"
)

// ================== æ¶ˆæ¯ç»“æ„ ==================
type Message struct {
	Topic   string
	Content string
	Time    time.Time
}

// ================== ä»£ç†æ ¸å¿ƒ ==================
type Broker struct {
	mu          sync.RWMutex
	subscribers map[string][]chan Message // ä¸»é¢˜ â†’ è®¢é˜…è€…é€šé“
	history     map[string][]Message      // ä¸»é¢˜ â†’ å†å²æ¶ˆæ¯
}

func NewBroker() *Broker {
	return &Broker{
		subscribers: make(map[string][]chan Message),
		history:     make(map[string][]Message),
	}
}

// è®¢é˜…ä¸»é¢˜ï¼ˆè¿”å›æ¶ˆæ¯é€šé“ï¼‰
func (b *Broker) Subscribe(topic string) <-chan Message {
	b.mu.Lock()
	defer b.mu.Unlock()

	ch := make(chan Message, 100)
	b.subscribers[topic] = append(b.subscribers[topic], ch)

	// å‘é€å†å²æ¶ˆæ¯ï¼ˆå¼‚æ­¥ï¼‰
	go func() {
		b.mu.RLock()
		defer b.mu.RUnlock()
		for _, msg := range b.history[topic] {
			ch <- msg
		}
	}()

	return ch
}

// å‘å¸ƒæ¶ˆæ¯
func (b *Broker) Publish(msg Message) {
	b.mu.Lock()
	defer b.mu.Unlock()

	// ä¿å­˜å†å²ï¼ˆæœ€å¤šä¿ç•™5æ¡ï¼‰
	b.history[msg.Topic] = append(b.history[msg.Topic], msg)
	if len(b.history[msg.Topic]) > 5 {
		b.history[msg.Topic] = b.history[msg.Topic][1:]
	}

	// å¹¿æ’­æ¶ˆæ¯
	for _, ch := range b.subscribers[msg.Topic] {
		select {
		case ch <- msg:
		default:
			fmt.Printf("è­¦å‘Šï¼š%s ä¸»é¢˜çš„è®¢é˜…è€…é€šé“å·²æ»¡\n", msg.Topic)
		}
	}
}

// ================== ä½¿ç”¨ç¤ºä¾‹ ==================
func main() {
	broker := NewBroker()

	// åˆ›å»º3ä¸ªè®¢é˜…è€…
	subscriber1 := broker.Subscribe("tech")
	subscriber2 := broker.Subscribe("sports")
	subscriber3 := broker.Subscribe("tech")

	// æ¶ˆè´¹è€…åç¨‹
	go func() {
		for msg := range subscriber1 {
			fmt.Printf("è®¢é˜…è€…1 [tech] æ”¶åˆ°æ¶ˆæ¯ï¼š%s (%s)\n", 
				msg.Content, msg.Time.Format("15:04:05"))
		}
	}()

	go func() {
		for msg := range subscriber2 {
			fmt.Printf("è®¢é˜…è€…2 [sports] æ”¶åˆ°æ¶ˆæ¯ï¼š%s\n", msg.Content)
		}
	}()

	go func() {
		for msg := range subscriber3 {
			fmt.Printf("è®¢é˜…è€…3 [tech] æ”¶åˆ°æ¶ˆæ¯ï¼š%s\n", msg.Content)
		}
	}()

	// å‘å¸ƒæ¶ˆæ¯
	topics := []string{"tech", "sports", "finance"}
	for i := 1; i <= 10; i++ {
		topic := topics[i%3]
		msg := Message{
			Topic:   topic,
			Content: fmt.Sprintf("æ–°é—»%d", i),
			Time:    time.Now(),
		}

		fmt.Printf("å‘å¸ƒæ¶ˆæ¯åˆ° [%s]ï¼š%s\n", topic, msg.Content)
		broker.Publish(msg)
		time.Sleep(500 * time.Millisecond)
	}

	// ç­‰å¾…æ¶ˆæ¯å¤„ç†
	time.Sleep(2 * time.Second)
}
```

------

### æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š

```shell
å‘å¸ƒæ¶ˆæ¯åˆ° [tech]ï¼šæ–°é—»1
è®¢é˜…è€…1 [tech] æ”¶åˆ°æ¶ˆæ¯ï¼šæ–°é—»1 (14:30:25)
è®¢é˜…è€…3 [tech] æ”¶åˆ°æ¶ˆæ¯ï¼šæ–°é—»1
å‘å¸ƒæ¶ˆæ¯åˆ° [sports]ï¼šæ–°é—»2
è®¢é˜…è€…2 [sports] æ”¶åˆ°æ¶ˆæ¯ï¼šæ–°é—»2
å‘å¸ƒæ¶ˆæ¯åˆ° [finance]ï¼šæ–°é—»3
å‘å¸ƒæ¶ˆæ¯åˆ° [tech]ï¼šæ–°é—»4
è®¢é˜…è€…1 [tech] æ”¶åˆ°æ¶ˆæ¯ï¼šæ–°é—»4 (14:30:26)
è®¢é˜…è€…3 [tech] æ”¶åˆ°æ¶ˆæ¯ï¼šæ–°é—»4
...
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **çº¿ç¨‹å®‰å…¨**ï¼šä½¿ç”¨`sync.RWMutex`ä¿æŠ¤å…±äº«æ•°æ®
2. **å†å²æ¶ˆæ¯**ï¼šæ¯ä¸ªä¸»é¢˜ä¿ç•™æœ€è¿‘5æ¡æ¶ˆæ¯
3. **é€šé“ç¼“å†²**ï¼šä½¿ç”¨ç¼“å†²é€šé“ï¼ˆå®¹é‡100ï¼‰é˜²æ­¢é˜»å¡
4. **è‡ªåŠ¨å›æº¯**ï¼šæ–°è®¢é˜…è€…è‡ªåŠ¨è·å–å†å²æ¶ˆæ¯
5. **æº¢å‡ºå¤„ç†**ï¼šé€šé“æ»¡æ—¶æ‰“å°è­¦å‘Šä¸é˜»å¡å‘å¸ƒè€…

------

### é«˜çº§åŠŸèƒ½æ‰©å±•æ–¹å‘

1. **é€šé…ç¬¦è®¢é˜…**ï¼šæ”¯æŒ`news.*`æ ¼å¼çš„ä¸»é¢˜åŒ¹é…
2. **æ¶ˆæ¯æŒä¹…åŒ–**ï¼šå°†æ¶ˆæ¯å­˜å‚¨åˆ°æ•°æ®åº“
3. **QoSç­‰çº§**ï¼šå®ç°è‡³å°‘ä¸€æ¬¡/æœ€å¤šä¸€æ¬¡æŠ•é€’ä¿è¯
4. **æ­»ä¿¡é˜Ÿåˆ—**ï¼šå¤„ç†æ— æ³•æŠ•é€’çš„æ¶ˆæ¯
5. **é›†ç¾¤æ¨¡å¼**ï¼šæ”¯æŒå¤šèŠ‚ç‚¹BrokerååŒå·¥ä½œ

------

### å‘å¸ƒè®¢é˜… vs è§‚å¯Ÿè€…æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§     | å‘å¸ƒè®¢é˜…æ¨¡å¼           | è§‚å¯Ÿè€…æ¨¡å¼         |
| :------- | :--------------------- | :----------------- |
| è€¦åˆç¨‹åº¦ | å®Œå…¨è§£è€¦ï¼ˆé€šè¿‡Brokerï¼‰ | ä¸»é¢˜ç›´æ¥æŒæœ‰è§‚å¯Ÿè€… |
| æ¶ˆæ¯ä¼ é€’ | å¼‚æ­¥ï¼ˆé€šå¸¸ï¼‰           | åŒæ­¥ï¼ˆé€šå¸¸ï¼‰       |
| æ‰©å±•æ€§   | æ”¯æŒåˆ†å¸ƒå¼ç³»ç»Ÿ         | é€‚åˆå•æœºåº”ç”¨       |
| æ¶ˆæ¯è·¯ç”± | æ”¯æŒå¤æ‚æ¨¡å¼åŒ¹é…       | ç®€å•çš„ä¸€å¯¹å¤šé€šçŸ¥   |
| å…¸å‹åº”ç”¨ | å¾®æœåŠ¡é€šä¿¡ã€æ—¥å¿—æ”¶é›†   | GUIäº‹ä»¶ã€çŠ¶æ€ç›‘æ§  |

------

### å®é™…åº”ç”¨åœºæ™¯

1. å¾®æœåŠ¡é—´çš„å¼‚æ­¥é€šä¿¡
2. å®æ—¶æ—¥å¿—æ”¶é›†ä¸åˆ†æ
3. ç‰©è”ç½‘è®¾å¤‡çŠ¶æ€å¹¿æ’­
4. é‡‘èäº¤æ˜“è¡Œæƒ…æ¨é€
5. ç¤¾äº¤ç½‘ç»œåŠ¨æ€æ›´æ–°

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **åŸç”Ÿå¹¶å‘**ï¼šgoroutine + channel å¤©ç„¶é€‚åˆæ¶ˆæ¯ç³»ç»Ÿ
2. **é«˜æ•ˆå†…å­˜**ï¼šç»“æ„ä½“åˆ‡ç‰‡å®ç°ç¯å½¢ç¼“å†²åŒº
3. **ç®€å•æŠ½è±¡**ï¼šé€šè¿‡`map`+`chan`å¿«é€Ÿå®ç°æ ¸å¿ƒé€»è¾‘
4. **é«˜æ€§èƒ½**ï¼šå•èŠ‚ç‚¹å¯å¤„ç†ç™¾ä¸‡çº§æ¶ˆæ¯/ç§’

å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯ç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ï¼ŒGoè¯­è¨€å‡­å€Ÿå…¶å¹¶å‘åŸè¯­å’Œé«˜æ•ˆæ€§èƒ½ï¼Œéå¸¸é€‚åˆå®ç°é«˜æ€§èƒ½æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆç±»ä¼¼NSQçš„è®¾è®¡ç†å¿µï¼‰ã€‚

## è´£ä»»é“¾æ¨¡å¼

è´£ä»»é“¾æ¨¡å¼æ˜¯ä¸€ç§**è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼**ï¼Œå…è®¸å°†è¯·æ±‚æ²¿ç€å¤„ç†é“¾ä¼ é€’ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¤„ç†è€…èƒ½å¤Ÿå¤„ç†å®ƒä¸ºæ­¢ã€‚è¯¥æ¨¡å¼é€šè¿‡**è§£è€¦è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…**ï¼Œæ”¯æŒåŠ¨æ€è°ƒæ•´å¤„ç†æµç¨‹ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **å¤„ç†å™¨æ¥å£ï¼ˆHandlerï¼‰**ï¼šå®šä¹‰å¤„ç†è¯·æ±‚çš„æ–¹æ³•å’Œè®¾ç½®ä¸‹ä¸€ä¸ªå¤„ç†è€…çš„æ–¹æ³•
2. **å…·ä½“å¤„ç†å™¨ï¼ˆConcrete Handlerï¼‰**ï¼šå®ç°å…·ä½“çš„å¤„ç†é€»è¾‘
3. **é“¾å¼ç»“æ„**ï¼šç»´æŠ¤å¤„ç†å™¨ä¹‹é—´çš„è¿æ¥å…³ç³»

------

### Go å®ç°ç¤ºä¾‹ï¼šHTTPè¯·æ±‚å¤„ç†é“¾

å®ç°ä¸€ä¸ªè¯·æ±‚å¤„ç†é“¾ï¼ŒåŒ…å«ä¸‰ä¸ªå¤„ç†ç¯èŠ‚ï¼š

1. **è®¤è¯æ£€æŸ¥**ï¼šéªŒè¯ç”¨æˆ·å‡­è¯
2. **æƒé™æ ¡éªŒ**ï¼šæ£€æŸ¥ç”¨æˆ·æƒé™
3. **æ—¥å¿—è®°å½•**ï¼šè®°å½•è¯·æ±‚ä¿¡æ¯

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import (
	"fmt"
	"net/http"
)

// ================== å¤„ç†å™¨æ¥å£ ==================
type Handler interface {
	Handle(req *http.Request) error
	SetNext(handler Handler)
}

// ================== åŸºç¡€å¤„ç†å™¨ ==================
type BaseHandler struct {
	next Handler
}

func (b *BaseHandler) SetNext(handler Handler) {
	b.next = handler
}

func (b *BaseHandler) handleNext(req *http.Request) error {
	if b.next != nil {
		return b.next.Handle(req)
	}
	return nil
}

// ================== å…·ä½“å¤„ç†å™¨ ==================
// è®¤è¯å¤„ç†å™¨
type AuthenticationHandler struct {
	BaseHandler
}

func (a *AuthenticationHandler) Handle(req *http.Request) error {
	fmt.Println("[Auth] éªŒè¯ç”¨æˆ·å‡­è¯...")
	// æ¨¡æ‹Ÿè®¤è¯é€»è¾‘
	if req.Header.Get("X-Auth-Token") == "" {
		return fmt.Errorf("æœªæˆæƒè®¿é—®")
	}
	fmt.Println("[Auth] è®¤è¯æˆåŠŸ")
	return a.handleNext(req)
}

// æƒé™å¤„ç†å™¨
type AuthorizationHandler struct {
	BaseHandler
}

func (a *AuthorizationHandler) Handle(req *http.Request) error {
	fmt.Println("[Authz] æ ¡éªŒè®¿é—®æƒé™...")
	// æ¨¡æ‹Ÿæƒé™æ ¡éªŒ
	if req.URL.Path == "/admin" && req.Header.Get("X-User-Role") != "admin" {
		return fmt.Errorf("æƒé™ä¸è¶³")
	}
	fmt.Println("[Authz] æƒé™æ ¡éªŒé€šè¿‡")
	return a.handleNext(req)
}

// æ—¥å¿—å¤„ç†å™¨
type LoggingHandler struct {
	BaseHandler
}

func (l *LoggingHandler) Handle(req *http.Request) error {
	fmt.Printf("[Log] è®°å½•è¯·æ±‚æ—¥å¿—: %s %s\n", req.Method, req.URL.Path)
	return l.handleNext(req)
}

// ================== é“¾å¼æ„å»ºå™¨ ==================
func BuildHandlerChain() Handler {
	auth := &AuthenticationHandler{}
	authz := &AuthorizationHandler{}
	log := &LoggingHandler{}

	auth.SetNext(authz)
	authz.SetNext(log)
	return auth
}

// ================== ä½¿ç”¨ç¤ºä¾‹ ==================
func main() {
	handlerChain := BuildHandlerChain()

	testCases := []*http.Request{
		{Method: "GET", URL: &http.URL{Path: "/public"}, Header: http.Header{}},
		{Method: "GET", URL: &http.URL{Path: "/private"}, Header: http.Header{
			"X-Auth-Token": []string{"token123"},
		}},
		{Method: "POST", URL: &http.URL{Path: "/admin"}, Header: http.Header{
			"X-Auth-Token": []string{"token123"},
			"X-User-Role":  []string{"user"},
		}},
		{Method: "POST", URL: &http.URL{Path: "/admin"}, Header: http.Header{
			"X-Auth-Token": []string{"admin-token"},
			"X-User-Role":  []string{"admin"},
		}},
	}

	for i, req := range testCases {
		fmt.Printf("\n=== æµ‹è¯•ç”¨ä¾‹ %d ===\n", i+1)
		if err := handlerChain.Handle(req); err != nil {
			fmt.Printf("è¯·æ±‚å¤„ç†å¤±è´¥: %v\n", err)
		} else {
			fmt.Println("è¯·æ±‚å¤„ç†æˆåŠŸ")
		}
	}
}
```

------

### æ‰§è¡Œç»“æœ

```shell
=== æµ‹è¯•ç”¨ä¾‹ 1 ===
[Auth] éªŒè¯ç”¨æˆ·å‡­è¯...
è¯·æ±‚å¤„ç†å¤±è´¥: æœªæˆæƒè®¿é—®

=== æµ‹è¯•ç”¨ä¾‹ 2 ===
[Auth] éªŒè¯ç”¨æˆ·å‡­è¯...
[Auth] è®¤è¯æˆåŠŸ
[Authz] æ ¡éªŒè®¿é—®æƒé™...
[Authz] æƒé™æ ¡éªŒé€šè¿‡
[Log] è®°å½•è¯·æ±‚æ—¥å¿—: GET /private
è¯·æ±‚å¤„ç†æˆåŠŸ

=== æµ‹è¯•ç”¨ä¾‹ 3 ===
[Auth] éªŒè¯ç”¨æˆ·å‡­è¯...
[Auth] è®¤è¯æˆåŠŸ
[Authz] æ ¡éªŒè®¿é—®æƒé™...
è¯·æ±‚å¤„ç†å¤±è´¥: æƒé™ä¸è¶³

=== æµ‹è¯•ç”¨ä¾‹ 4 ===
[Auth] éªŒè¯ç”¨æˆ·å‡­è¯...
[Auth] è®¤è¯æˆåŠŸ
[Authz] æ ¡éªŒè®¿é—®æƒé™...
[Authz] æƒé™æ ¡éªŒé€šè¿‡
[Log] è®°å½•è¯·æ±‚æ—¥å¿—: POST /admin
è¯·æ±‚å¤„ç†æˆåŠŸ
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **é“¾å¼ä¼ é€’**ï¼šæ¯ä¸ªå¤„ç†å™¨è°ƒç”¨`handleNext()`ä¼ é€’è¯·æ±‚
2. **çµæ´»ç»„åˆ**ï¼šå¯åŠ¨æ€è°ƒæ•´å¤„ç†å™¨é¡ºåºæˆ–å¢å‡å¤„ç†å™¨
3. **æå‰ç»ˆæ­¢**ï¼šä»»ä¸€å¤„ç†å™¨è¿”å›é”™è¯¯å³ç»ˆæ­¢é“¾å¼ä¼ é€’
4. **ç»Ÿä¸€æ¥å£**ï¼šæ‰€æœ‰å¤„ç†å™¨å®ç°ç›¸åŒ`Handler`æ¥å£

------

### è´£ä»»é“¾æ¨¡å¼ vs ä¸­é—´ä»¶æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§     | è´£ä»»é“¾æ¨¡å¼   | ä¸­é—´ä»¶æ¨¡å¼           |
| :------- | :----------- | :------------------- |
| æ§åˆ¶æµå‘ | å•å‘ä¼ é€’     | é€šå¸¸åŒå‘ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰ |
| ä¸­æ–­æœºåˆ¶ | å¯æå‰ç»ˆæ­¢   | é€šå¸¸ä¸ä¸­æ–­           |
| ä½¿ç”¨åœºæ™¯ | ä¸šåŠ¡å¤„ç†æµç¨‹ | è¯·æ±‚é¢„å¤„ç†/åå¤„ç†    |
| å…¸å‹å®ç° | æ˜ç¡®å¤„ç†å™¨é“¾ | å‡½æ•°é—­åŒ…åµŒå¥—         |

------

### å®é™…åº”ç”¨åœºæ™¯

1. å®¡æ‰¹å·¥ä½œæµï¼ˆæŠ¥é”€å®¡æ‰¹ã€å‡æœŸå®¡æ‰¹ï¼‰
2. è¾“å…¥éªŒè¯é“¾ï¼ˆè¡¨å•å­—æ®µæ ¡éªŒï¼‰
3. å¼‚å¸¸å¤„ç†ç®¡é“ï¼ˆå¤šå±‚é”™è¯¯æ•è·ï¼‰
4. æ¸¸æˆäº‹ä»¶å¤„ç†ï¼ˆç‰©ç†ç¢°æ’â†’éŸ³æ•ˆâ†’è®¡åˆ†ï¼‰
5. è®¢å•å¤„ç†æµç¨‹ï¼ˆåº“å­˜æ£€æŸ¥â†’æ”¯ä»˜â†’å‘è´§ï¼‰

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **æ¥å£éšå¼å®ç°**ï¼šæ— éœ€æ˜¾å¼å£°æ˜æ¥å£å®ç°å…³ç³»
2. **ç»„åˆæ›¿ä»£ç»§æ‰¿**ï¼šé€šè¿‡ç»“æ„ä½“åµŒå¥—å®ç°ä»£ç å¤ç”¨
3. **å¹¶å‘å®‰å…¨**ï¼šæ¯ä¸ªè¯·æ±‚ç‹¬ç«‹å¤„ç†é“¾æ— å…±äº«çŠ¶æ€
4. **å¤©ç„¶ç®¡é“**ï¼šä¸Goçš„channelç‰¹æ€§å¯ç»“åˆå®ç°å¼‚æ­¥å¤„ç†é“¾

è´£ä»»é“¾æ¨¡å¼é€šè¿‡è§£è€¦å¤„ç†èŠ‚ç‚¹ä¸æ‰§è¡Œé¡ºåºï¼Œä¸ºæ„å»ºçµæ´»å¯æ‰©å±•çš„å¤„ç†æµç¨‹æä¾›äº†ä¼˜é›…è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆéœ€è¦åŠ¨æ€è°ƒæ•´å¤„ç†æ­¥éª¤çš„ä¸šåŠ¡åœºæ™¯ã€‚

## å»ºé€ è€…æ¨¡å¼

å»ºé€ è€…æ¨¡å¼æ˜¯ä¸€ç§**åˆ›å»ºå‹è®¾è®¡æ¨¡å¼**ï¼Œç”¨äº**åˆ†æ­¥éª¤æ„å»ºå¤æ‚å¯¹è±¡**ï¼Œå°†å¯¹è±¡çš„**æ„é€ è¿‡ç¨‹**ä¸**æœ€ç»ˆè¡¨ç¤º**åˆ†ç¦»ï¼Œä½¿å¾—ç›¸åŒçš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„å¯¹è±¡è¡¨ç¤ºã€‚è¯¥æ¨¡å¼ç‰¹åˆ«é€‚ç”¨äºåŒ…å«å¤šä¸ªå¯é€‰å‚æ•°çš„å¤æ‚å¯¹è±¡åˆ›å»ºåœºæ™¯ã€‚

------

### æ ¸å¿ƒç»„ä»¶

1. **äº§å“ï¼ˆProductï¼‰**ï¼šæœ€ç»ˆè¦æ„å»ºçš„å¤æ‚å¯¹è±¡
2. **å»ºé€ è€…æ¥å£ï¼ˆBuilderï¼‰**ï¼šå®šä¹‰æ„å»ºæ­¥éª¤çš„æŠ½è±¡æ–¹æ³•
3. **å…·ä½“å»ºé€ è€…ï¼ˆConcrete Builderï¼‰**ï¼šå®ç°æ¥å£çš„å…·ä½“æ„å»ºé€»è¾‘
4. **æŒ‡æŒ¥è€…ï¼ˆDirectorï¼‰**ï¼šæ§åˆ¶æ„å»ºæµç¨‹ï¼ˆå¯é€‰ï¼‰

------

### Go å®ç°ç¤ºä¾‹ï¼šæ•°æ®åº“è¿æ¥é…ç½®

æ„å»ºä¸€ä¸ªæ”¯æŒé“¾å¼è°ƒç”¨çš„æ•°æ®åº“è¿æ¥é…ç½®å»ºé€ å™¨ï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š

- å¿…å¡«å‚æ•°æ ¡éªŒ
- é»˜è®¤å€¼è®¾ç½®
- å‚æ•°çº¦æŸæ£€æŸ¥
- ä¸å¯å˜æœ€ç»ˆé…ç½®

#### å®Œæ•´ä»£ç å®ç°ï¼š

```go
package main

import (
	"errors"
	"fmt"
	"time"
)

// ================== äº§å“ç»“æ„ä½“ ==================
type DBConfig struct {
	host     string
	port     int
	username string
	password string
	timeout  time.Duration
	maxConns int
}

func (c DBConfig) String() string {
	return fmt.Sprintf(
		"host=%s port=%d user=%s password=****** timeout=%v max_conns=%d",
		c.host, c.port, c.username, c.timeout, c.maxConns,
	)
}

// ================== å»ºé€ è€… ==================
type DBConfigBuilder struct {
	host     string
	port     int
	username string
	password string
	timeout  time.Duration
	maxConns int
}

func NewDBConfigBuilder() *DBConfigBuilder {
	return &DBConfigBuilder{
		port:    5432,          // é»˜è®¤ç«¯å£
		timeout: 5 * time.Second, // é»˜è®¤è¶…æ—¶
		maxConns: 10,           // é»˜è®¤æœ€å¤§è¿æ¥æ•°
	}
}

// é“¾å¼æ–¹æ³•è®¾ç½®å‚æ•°
func (b *DBConfigBuilder) WithHost(host string) *DBConfigBuilder {
	b.host = host
	return b
}

func (b *DBConfigBuilder) WithPort(port int) *DBConfigBuilder {
	if port < 1 || port > 65535 {
		panic("æ— æ•ˆç«¯å£å·")
	}
	b.port = port
	return b
}

func (b *DBConfigBuilder) WithCredentials(user, pass string) *DBConfigBuilder {
	b.username = user
	b.password = pass
	return b
}

func (b *DBConfigBuilder) WithTimeout(timeout time.Duration) *DBConfigBuilder {
	if timeout < 0 {
		panic("è¶…æ—¶æ—¶é—´ä¸èƒ½ä¸ºè´Ÿ")
	}
	b.timeout = timeout
	return b
}

func (b *DBConfigBuilder) WithMaxConns(max int) *DBConfigBuilder {
	if max < 1 {
		panic("æœ€å¤§è¿æ¥æ•°è‡³å°‘ä¸º1")
	}
	b.maxConns = max
	return b
}

// æ„å»ºæœ€ç»ˆé…ç½®ï¼ˆå«æ ¡éªŒé€»è¾‘ï¼‰
func (b *DBConfigBuilder) Build() (*DBConfig, error) {
	if b.host == "" {
		return nil, errors.New("å¿…é¡»æŒ‡å®šä¸»æœºåœ°å€")
	}
	if b.username == "" || b.password == "" {
		return nil, errors.New("å¿…é¡»æä¾›ç”¨æˆ·åå’Œå¯†ç ")
	}

	return &DBConfig{
		host:     b.host,
		port:     b.port,
		username: b.username,
		password: b.password,
		timeout:  b.timeout,
		maxConns: b.maxConns,
	}, nil
}

// ================== ä½¿ç”¨ç¤ºä¾‹ ==================
func main() {
	// æœ€å°é…ç½®ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
	builder := NewDBConfigBuilder()
	cfg1, err := builder.
		WithHost("localhost").
		WithCredentials("admin", "secret").
		Build()
	if err != nil {
		panic(err)
	}
	fmt.Println("é…ç½®1:", cfg1)

	// å…¨è‡ªå®šä¹‰é…ç½®
	cfg2, _ := NewDBConfigBuilder().
		WithHost("db.prod.com").
		WithPort(6432).
		WithCredentials("app_user", "P@ssw0rd").
		WithTimeout(10*time.Second).
		WithMaxConns(50).
		Build()
	fmt.Println("é…ç½®2:", cfg2)

	// é”™è¯¯é…ç½®ç¤ºä¾‹
	_, err = NewDBConfigBuilder().
		WithHost("").
		WithCredentials("user", "pass").
		Build()
	fmt.Println("é”™è¯¯é…ç½®:", err)
}
```

------

### æ‰§è¡Œç»“æœ

```shell
é…ç½®1: host=localhost port=5432 user=admin password=****** timeout=5s max_conns=10
é…ç½®2: host=db.prod.com port=6432 user=app_user password=****** timeout=10s max_conns=50
é”™è¯¯é…ç½®: å¿…é¡»æŒ‡å®šä¸»æœºåœ°å€
```

------

### å…³é”®è®¾è®¡ç‚¹

1. **é“¾å¼è°ƒç”¨**ï¼šæ¯ä¸ª`With`æ–¹æ³•è¿”å›å»ºé€ è€…è‡ªèº«
2. **å‚æ•°æ ¡éªŒ**ï¼šåœ¨è®¾ç½®æ–¹æ³•å’Œ`Build`æ–¹æ³•ä¸­è¿›è¡ŒåŒé‡æ ¡éªŒ
3. **é»˜è®¤å€¼**ï¼šå»ºé€ è€…åˆå§‹åŒ–æ—¶è®¾ç½®åˆç†é»˜è®¤å€¼
4. **ä¸å¯å˜äº§å“**ï¼šæ„å»ºå®Œæˆåè¿”å›ä¸å¯ä¿®æ”¹çš„é…ç½®å¯¹è±¡
5. **é”™è¯¯å¤„ç†**ï¼š`Build`æ–¹æ³•è¿”å›é”™è¯¯ä¿¡æ¯

------

### å»ºé€ è€…æ¨¡å¼ vs å·¥å‚æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§     | å»ºé€ è€…æ¨¡å¼           | å·¥å‚æ¨¡å¼          |
| :------- | :------------------- | :---------------- |
| é€‚ç”¨åœºæ™¯ | å¤æ‚å¯¹è±¡ï¼ˆå¤šå‚æ•°ï¼‰   | ç®€å•å¯¹è±¡/æ ‡å‡†åˆ›å»º |
| æ„å»ºè¿‡ç¨‹ | åˆ†æ­¥éª¤æ§åˆ¶           | å•ä¸€æ–¹æ³•å®Œæˆåˆ›å»º  |
| å‚æ•°å¤„ç† | æ”¯æŒå¯é€‰å‚æ•°å’Œé»˜è®¤å€¼ | éœ€è¦å®Œæ•´å‚æ•°      |
| å¤æ‚åº¦   | é€‚åˆé«˜å¤æ‚åº¦å¯¹è±¡     | é€‚åˆä½å¤æ‚åº¦å¯¹è±¡  |

------

### å®é™…åº”ç”¨åœºæ™¯

1. é…ç½®å¯¹è±¡æ„å»ºï¼ˆå¦‚æ•°æ®åº“ã€HTTPæœåŠ¡é…ç½®ï¼‰
2. å¤æ‚æ–‡æ¡£ç”Ÿæˆï¼ˆHTML/XMLæ„å»ºå™¨ï¼‰
3. æ¸¸æˆè§’è‰²åˆ›å»ºï¼ˆåŒ…å«å¤šä¸ªè£…å¤‡/å±æ€§ï¼‰
4. æŸ¥è¯¢æ¡ä»¶ç»„è£…ï¼ˆSQLæŸ¥è¯¢æ„é€ å™¨ï¼‰
5. æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿï¼ˆåˆ†æ­¥éª¤æ·»åŠ ç« èŠ‚/å›¾è¡¨ï¼‰

------

### Goè¯­è¨€å®ç°ä¼˜åŠ¿

1. **ç»“æ„ä½“æ ‡ç­¾**ï¼šæ”¯æŒé€šè¿‡tagå®ç°è‡ªåŠ¨åŒ–æ ¡éªŒ
2. **é›¶å€¼ä¼˜åŒ–**ï¼šåˆ©ç”¨ç±»å‹ç³»ç»Ÿçš„é›¶å€¼ç‰¹æ€§
3. **æ–¹æ³•æ¥æ”¶å™¨**ï¼šé€šè¿‡æŒ‡é’ˆæ¥æ”¶å™¨å®ç°æµç•…æ¥å£
4. **é”™è¯¯å¤„ç†**ï¼šå¤šè¿”å›å€¼æœºåˆ¶ä¾¿äºé”™è¯¯ä¼ é€’
5. **å¹¶å‘å®‰å…¨**ï¼šæ¯ä¸ªå»ºé€ è€…å®ä¾‹ç‹¬ç«‹ä½¿ç”¨

å»ºé€ è€…æ¨¡å¼é€šè¿‡æ˜ç¡®çš„æ­¥éª¤åŒ–æ„å»ºè¿‡ç¨‹ï¼Œæ˜¾è‘—æå‡äº†å¤æ‚å¯¹è±¡åˆ›å»ºçš„ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œæ˜¯å¤„ç†å¤šå‚æ•°ã€å¤šçº¦æŸå¯¹è±¡æ„é€ çš„ç†æƒ³é€‰æ‹©ã€‚